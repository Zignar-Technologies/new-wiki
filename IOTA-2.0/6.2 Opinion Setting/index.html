<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta name=author content="Jorge Christian Gelso"><link href=https://docs.zignar.io/IOTA-2.0/6.2%20Opinion%20Setting/ rel=canonical><link rel=icon href=../../assets/favicon.svg><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.7+insiders-2.9.2"><title>6.2 Opinion Setting - Zignar Technologies Docs</title><link rel=stylesheet href=../../assets/stylesheets/main.92048cb8.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.73e53a79.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:300,400,400i,700%7CSource+Code+Pro&display=fallback"><style>:root{--md-text-font-family:"Montserrat";--md-code-font-family:"Source Code Pro"}</style><link rel=stylesheet href=../../stylesheets/extra.css><meta name=robots content=noindex><meta property=og:type content=website><meta property=og:title content="Zignar Technologies Docs - 6.2 Opinion Setting"><meta property=og:description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta content=https://docs.zignar.io/IOTA-2.0/6.2%20Opinion%20Setting/ property=og:url><meta property=og:image content=https://docs.zignar.io/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568><meta name=twitter:title content="Zignar Technologies Docs - 6.2 Opinion Setting"><meta name=twitter:description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta name=twitter:image content=https://docs.zignar.io/assets/images/banner.png><link rel=stylesheet href=../../overrides/assets/stylesheets/main.3cfa086a.min.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=red> <script>function __scope(t,e="../.."){return new URL(e,location).pathname+"."+t}function __get(t,e=localStorage,n){return JSON.parse(e.getItem(__scope(t,n)))}function __set(t,e,n=localStorage,o){try{n.setItem(__scope(t,o),JSON.stringify(e))}catch(t){}}</script> <script>var palette=__get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#62-opinion-setting class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> Zignar Technologies has it's own Documentation Website. For any improvements, please contact Chris at chris@zignar.tech </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Zignar Technologies Docs" class="md-header__button md-logo" aria-label="Zignar Technologies Docs" data-md-component=logo> <img src=../../assets/zignarlogo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Zignar Technologies Docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 6.2 Opinion Setting </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=light-blue data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Zignar-Technologies/wiki/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg> </div> <div class=md-source__repository> Zignar Docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> IOTA 2.0 Specs </a> </li> <li class=md-tabs__item> <a href=../../IoT%20Guide/ class=md-tabs__link> IoT Guide </a> </li> <li class=md-tabs__item> <a href=../../reference/basic-markdown/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../JTBD/barriers/ class=md-tabs__link> JTBD </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Zignar Technologies Docs" class="md-nav__button md-logo" aria-label="Zignar Technologies Docs" data-md-component=logo> <img src=../../assets/zignarlogo.png alt=logo> </a> Zignar Technologies Docs </label> <div class=md-nav__source> <a href=https://github.com/Zignar-Technologies/wiki/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg> </div> <div class=md-source__repository> Zignar Docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--container "> <a href=../ >IOTA 2.0 Specs</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="IOTA 2.0 Specs" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> IOTA 2.0 Specs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../0.0%20Preface/ class=md-nav__link> 0.0 Preface </a> </li> <li class=md-nav__item> <a href=../1.1%20Introduction/ class=md-nav__link> 1.1 Introduction </a> </li> <li class=md-nav__item> <a href=../2.2%20Message%20Layout/ class=md-nav__link> 2.2 Message Layout </a> </li> <li class=md-nav__item> <a href=../2.3%20Standard%20Payloads%20Layout/ class=md-nav__link> 2.3 Standard Payloads Layout </a> </li> <li class=md-nav__item> <a href=../2.4%20Data%20Flow/ class=md-nav__link> 2.4 Data flow </a> </li> <li class=md-nav__item> <a href=../3.3%20Peer%20Discovery/ class=md-nav__link> 3.3 Peer Discovery </a> </li> <li class=md-nav__item> <a href=../3.4%20Neighbor%20Selection/ class=md-nav__link> 3.4 Neighbor Selection </a> </li> <li class=md-nav__item> <a href=../4.1%20The%20Tangle/ class=md-nav__link> 4.1 The Tangle </a> </li> <li class=md-nav__item> <a href=../4.2%20Timestamps/ class=md-nav__link> 4.2 Timestamps </a> </li> <li class=md-nav__item> <a href=../4.3%20Tip%20Selection%20Algorithm/ class=md-nav__link> 4.3 Tip Selection Algorithm </a> </li> <li class=md-nav__item> <a href=../4.4%20Solidification/ class=md-nav__link> 4.4 Solidification </a> </li> <li class=md-nav__item> <a href=../4.5%20Rate%20Control/ class=md-nav__link> 4.5 Rate Control </a> </li> <li class=md-nav__item> <a href=../4.6%20Congestion%20Control/ class=md-nav__link> 4.6 Congestion control </a> </li> <li class=md-nav__item> <a href=../4.7%20Markers/ class=md-nav__link> 4.7 Markers </a> </li> <li class=md-nav__item> <a href=../5.1%20UTXO/ class=md-nav__link> 5.1 UTXO </a> </li> <li class=md-nav__item> <a href=../5.2%20Ledger%20State/ class=md-nav__link> 5.2 Ledger State </a> </li> <li class=md-nav__item> <a href=../5.3%20Mana/ class=md-nav__link> 5.3 Mana </a> </li> <li class=md-nav__item> <a href=../6.1%20Objects%20of%20Consensus/ class=md-nav__link> 6.1 Objects of Consensus </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 6.2 Opinion Setting <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 6.2 Opinion Setting </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#621-preliminaries class=md-nav__link> 6.2.1 Preliminaries </a> <nav class=md-nav aria-label="6.2.1 Preliminaries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#6212-motivation class=md-nav__link> 6.2.1.2 Motivation </a> </li> <li class=md-nav__item> <a href=#6213-summary class=md-nav__link> 6.2.1.3 Summary </a> </li> <li class=md-nav__item> <a href=#6214-dependencies class=md-nav__link> 6.2.1.4 Dependencies </a> </li> <li class=md-nav__item> <a href=#6214-parameters-and-lists class=md-nav__link> 6.2.1.4 Parameters and Lists </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#622-timestamps class=md-nav__link> 6.2.2 Timestamps </a> <nav class=md-nav aria-label="6.2.2 Timestamps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#6221-setting-the-initial-opinion class=md-nav__link> 6.2.2.1 Setting the initial opinion </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#623-transactions-and-fcob class=md-nav__link> 6.2.3 Transactions and FCoB </a> <nav class=md-nav aria-label="6.2.3 Transactions and FCoB"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#6231-fcob-function class=md-nav__link> 6.2.3.1 FCoB function </a> </li> <li class=md-nav__item> <a href=#6232-when-to-set-the-opinion class=md-nav__link> 6.2.3.2 When to set the opinion </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../6.3%20Fast%20Probabilistic%20Consensus/ class=md-nav__link> 6.3 Fast Probabilistic Consensus </a> </li> <li class=md-nav__item> <a href=../6.4%20Finalization/ class=md-nav__link> 6.4 Finalization </a> </li> <li class=md-nav__item> <a href=../6.5%20dRNG/ class=md-nav__link> 6.5 dRNG </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--container "> <a href=../../IoT%20Guide/ >IoT Guide</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="IoT Guide" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> IoT Guide </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/basic-markdown/ class=md-nav__link> Basic Markdown Guide </a> </li> <li class=md-nav__item> <a href=../../reference/abbreviations/ class=md-nav__link> Abbreviations </a> </li> <li class=md-nav__item> <a href=../../reference/buttons/ class=md-nav__link> Buttons </a> </li> <li class=md-nav__item> <a href=../../reference/code-blocks/ class=md-nav__link> Code blocks </a> </li> <li class=md-nav__item> <a href=../../reference/content-tabs/ class=md-nav__link> Content tabs </a> </li> <li class=md-nav__item> <a href=../../reference/data-tables/ class=md-nav__link> Data tables </a> </li> <li class=md-nav__item> <a href=../../reference/diagrams/ class=md-nav__link> Diagrams </a> </li> <li class=md-nav__item> <a href=../../reference/footnotes/ class=md-nav__link> Footnotes </a> </li> <li class=md-nav__item> <a href=../../reference/formatting/ class=md-nav__link> Formatting </a> </li> <li class=md-nav__item> <a href=../../reference/icons-emojis/ class=md-nav__link> Icons + Emojis </a> </li> <li class=md-nav__item> <a href=../../reference/images/ class=md-nav__link> Images </a> </li> <li class=md-nav__item> <a href=../../reference/lists/ class=md-nav__link> Lists </a> </li> <li class=md-nav__item> <a href=../../reference/mathjax/ class=md-nav__link> MathJax </a> </li> <li class=md-nav__item> <a href=../../reference/pdf/ class=md-nav__link> PDF Files Support </a> </li> <li class=md-nav__item> <a href=../../reference/progress/ class=md-nav__link> Progress Bar </a> </li> <li class=md-nav__item> <a href=../../reference/remarks/ class=md-nav__link> Remarks </a> </li> <li class=md-nav__item> <a href=../../reference/smartsymbols/ class=md-nav__link> Smart symbols </a> </li> <li class=md-nav__item> <a href=../../reference/stl/ class=md-nav__link> STL Files Support </a> </li> <li class=md-nav__item> <a href=../../reference/installation/ class=md-nav__link> Installation Guide </a> </li> <li class=md-nav__item> <a href=../../reference/awesome/ class=md-nav__link> Customizing Navigation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> JTBD <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=JTBD data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> JTBD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../JTBD/barriers/ class=md-nav__link> Five barriers to innovation </a> </li> <li class=md-nav__item> <a href=../../JTBD/jtbd/ class=md-nav__link> What is Jobs-to-be-done </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#621-preliminaries class=md-nav__link> 6.2.1 Preliminaries </a> <nav class=md-nav aria-label="6.2.1 Preliminaries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#6212-motivation class=md-nav__link> 6.2.1.2 Motivation </a> </li> <li class=md-nav__item> <a href=#6213-summary class=md-nav__link> 6.2.1.3 Summary </a> </li> <li class=md-nav__item> <a href=#6214-dependencies class=md-nav__link> 6.2.1.4 Dependencies </a> </li> <li class=md-nav__item> <a href=#6214-parameters-and-lists class=md-nav__link> 6.2.1.4 Parameters and Lists </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#622-timestamps class=md-nav__link> 6.2.2 Timestamps </a> <nav class=md-nav aria-label="6.2.2 Timestamps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#6221-setting-the-initial-opinion class=md-nav__link> 6.2.2.1 Setting the initial opinion </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#623-transactions-and-fcob class=md-nav__link> 6.2.3 Transactions and FCoB </a> <nav class=md-nav aria-label="6.2.3 Transactions and FCoB"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#6231-fcob-function class=md-nav__link> 6.2.3.1 FCoB function </a> </li> <li class=md-nav__item> <a href=#6232-when-to-set-the-opinion class=md-nav__link> 6.2.3.2 When to set the opinion </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href="https://github.com/Zignar-Technologies/wiki/tree/main/docs/IOTA-2.0/6.2 Opinion Setting.md" title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=62-opinion-setting>6.2 Opinion Setting<a class=headerlink href=#62-opinion-setting title="Permanent link">&para;</a></h1> <h2 id=621-preliminaries>6.2.1 Preliminaries<a class=headerlink href=#621-preliminaries title="Permanent link">&para;</a></h2> <h3 id=6212-motivation>6.2.1.2 Motivation<a class=headerlink href=#6212-motivation title="Permanent link">&para;</a></h3> <p>FPC is a binary voting protocol which takes a series of initial boolean values, and outputs a final value: see <a href=../6.3%20Fast%20Probabilistic%20Consensus/ >Section 6.3 - Fast Probabilistic Consensus</a>. This specification describes how to set this initial Boolean value. Specification <a href=../6.1%20Objects%20of%20Consensus/ >6.1 - Object of Consensus</a> describes how FPC interacts with other modules in the protocol, specifically how the functions <code>QueryStatus</code> and <code>AnswerStatus</code> react to the metadata <code>opinionField</code>. Moreover, the FPC specification, <a href=../6.3%20Fast%20Probabilistic%20Consensus/ >Section 6.3 - Fast Probabilistic Consensus</a>, describes how the <code>opinionField</code> is updated when FPC terminates.</p> <p>We need to describe how to set the initial opinion and how to trigger FPC voting. Specifically, we need to describe how the metadata <code>opinionField</code> is initially set. Since the outcome of FPC respects a supermajority of initial opinions, it is important that the initial opinion is set correctly. For example, if 90% of nodes (weighted by active consensus mana) initially want to accept a transaction, the transaction is accepted with very high probablity. </p> <p>Recall from specification <a href=../6.1%20Objects%20of%20Consensus/ >Section 6.1 - Object of Consensus</a>, that <code>opinionField</code> consists of fields, <code>opinion</code> which is a boolean, <code>level</code> which is either 1,2, or 3, and <code>timeFormed</code> which is a time. In this specification, we describe how these three fields are set for both messages and transactions. </p> <h3 id=6213-summary>6.2.1.3 Summary<a class=headerlink href=#6213-summary title="Permanent link">&para;</a></h3> <p>In this specification, we describe how the Opinion Setter, see <a href=./2.4%20Data%20flow.md>Section 2.4 - Data Flow</a>, initially sets <code>opinionField</code> metadata for every object being voted upon. Specifically, the opinion setter writes: + The initial opinion, i.e. the initial boolean value. + The level of knowledge which dictates when FPC will be triggered. + The time the opinion was formed. </p> <p>See <a href=../6.1%20Objects%20of%20Consensus/ >Section 6.1 - Object of Consensus</a> for a detailed explanation of these fields. </p> <p>As discussed in <a href=../6.1%20Objects%20of%20Consensus/ >Section 6.1 - Object of Consensus</a>, FPC can potentially vote on two main object types: + transactions in order to resolve conflicts + timestamps in order to judge timestamps</p> <p>We split this specification into two main sections: the first dealing with setting the opinion on messages and their timestamps, and the second on setting the opinion on transactions. </p> <p>With regards to timestamps, we vote on whether or not the timestamp is "too old" when the message arrives to the node. As with voting on transactions, we can reset this opinion using the approval weight even if the node is out of sync. </p> <p>We judge transactions based on the FCoB rule, which stands for Fast Consensus of Barcelona, in honor of the research summit where the rule was first defined. A transaction <code>X</code> satisfied the FCoB rule if the node has not received any transactions conflicting with <code>X</code> before <code>arrivalTime(X)+C</code> where <code>C</code> is the FCoB parameter. Recall from <a href=../6.4%20Finalization/ >Section 6.4 - Finalization</a> that two transactions conflict if they consume the same UTXO outputs. </p> <p>Intuitively, the FCoB rule only accepts a transaction if it has arrived significantly before any other conflict. The FCoB rule guarantees that if one transaction is liked by a significant number of nodes (weighted by consensus mana), that all other conflicting transactions will be initially disliked by a supermajority of nodes, and thus rejected by FPC, guaranteeing that no two conflicting messages will be approved by FPC. </p> <h3 id=6214-dependencies>6.2.1.4 Dependencies<a class=headerlink href=#6214-dependencies title="Permanent link">&para;</a></h3> <p>This part of the specification depends on the following specifications: + <a href=../4.2%20Timestamps/ >Section 4.2 - Timestamps</a> + <a href=../5.2%20Ledger%20State/ >Section 5.2 - Ledger State</a> + <a href=../6.1%20Objects%20of%20Consensus/ >Section 6.1 - Object of Consensus</a> + <a href=../6.4%20Finalization/ >Section 6.4 - Finalization</a></p> <h3 id=6214-parameters-and-lists>6.2.1.4 Parameters and Lists<a class=headerlink href=#6214-parameters-and-lists title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>DLARGE</code></td> <td>duration</td> <td>Gratuitous network delay estimate; set to 15 seconds</td> </tr> <tr> <td><code>W</code></td> <td>duration</td> <td>Time window, set to 1 minute. Require W&gt;2DLARGE</td> </tr> <tr> <td><code>DSMALL</code></td> <td>duration</td> <td>Small estimated network delay, set to 5 seconds</td> </tr> <tr> <td><code>C</code></td> <td>duration</td> <td>FCoB parameter=DSMALL</td> </tr> </tbody> </table> <h2 id=622-timestamps>6.2.2 Timestamps<a class=headerlink href=#622-timestamps title="Permanent link">&para;</a></h2> <p>The timestamp defines the time when the message was created. Voting on timestamps ensures that nodes are issuing messages with correct timestamps, where correct means that the offset with current time is lower than a certain parameter <code>W</code>. This time window is large to account for the network delay. In order to have consensus on the accuracy of the timestamp, and hence the eligibility of the message, we use <a href=../6.3%20Fast%20Probabilistic%20Consensus/ >FPC</a> voting, along with the levels of knowledge. </p> <p>Clearly, in order to have a correct perception of the timestamp quality, <strong>we assume the node is in sync</strong> (see section <a href=#Not_in_Sync>Not in Sync</a> otherwise). Voting on timestamps should not occur for every message. Specifically, only for those that arrive with an offset close to <code>W</code>, i.e. within <code>DLARGE</code>.</p> <h3 id=6221-setting-the-initial-opinion>6.2.2.1 Setting the initial opinion<a class=headerlink href=#6221-setting-the-initial-opinion title="Permanent link">&para;</a></h3> <p>In this section, we describe how the <code>opinionField</code> is set for messages, and how we achieve consensus on the correctness of timestamps. </p> <p>The opinion of timestamp is stored according to the rules laid out in the <a href=../6.1%20Objects%20of%20Consensus/ >Object of Consensus</a> specification. The opinion is set by the module called the <code>OpinionManager</code>: see <a href=./2.4%20Data%20flow.md>Section 2.4 - Data Flow</a>. Refer to the <a href=../6.3%20Fast%20Probabilistic%20Consensus/ >FPC</a> specification to see how the voting actually takes place. </p> <p>The node shall set <code>messageID.opinionField=timestampOpinion(messageID)</code>, using the function defined below.</p> <p>The initial opinion and level of knowledge are set according to the following rule:</p> <p><div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=err>(</span><span class=nf>bool</span><span class=p>,</span><span class=n>level</span><span class=p>,</span><span class=n>time</span><span class=p>)</span> <span class=o>=</span> <span class=n>timestampOpinion</span><span class=p>(</span><span class=n>messageID</span><span class=p>)</span>
<span class=n>time</span> <span class=o>=</span> <span class=n>CurrentTime</span><span class=p>()</span>
<span class=k>IF</span> <span class=n>messageID</span><span class=p>.</span><span class=n>arrivalTime</span><span class=o>+</span><span class=n>w</span> <span class=o>&gt;=</span> <span class=n>CurrentTime</span><span class=p>()</span>  
    <span class=n>opinion</span> <span class=o>=</span> <span class=k>TRUE</span>
<span class=k>ELSE</span> 
    <span class=n>opinion</span> <span class=o>=</span> <span class=n>DISLIKE</span>
<span class=k>IF</span> <span class=err>|</span><span class=n>messageID</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>+</span><span class=n>W</span> <span class=o>-</span> <span class=n>CurrentTime</span><span class=p>()</span> <span class=err>|</span> <span class=o>&gt;=</span> <span class=n>DLARGE</span>
    <span class=n>level</span> <span class=o>=</span> <span class=mi>2</span>
<span class=k>ELSE</span> <span class=k>IF</span> <span class=err>|</span><span class=n>messageID</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>+</span><span class=n>W</span> <span class=o>-</span> <span class=n>CurrentTime</span><span class=p>()</span> <span class=err>|</span> <span class=o>&gt;=</span> <span class=mi>2</span><span class=o>*</span><span class=n>DLARGE</span>
    <span class=n>level</span> <span class=o>=</span> <span class=mi>3</span>
<span class=k>ELSE</span> 
    <span class=n>level</span> <span class=o>=</span> <span class=mi>1</span>
</code></pre></div> Recall that the <code>arrivalTime.messageID</code> is the time that the message was received by the node: see <a href=../2.2%20Message%20Layout/ >Section 2.2 - Message Layout</a>. The initial opinion is set based on the question "did the transaction arrive before <code>currentTime - W</code>?". The level of knowledge is then set by the margin as a factor of the delay time. Specifically, under the assumption that all messages are delivered to all nodes within time <code>DLARGE</code> after the arrive (with high probability), then: + If <code>|arrivalTime +W - currentTime | &lt; DLARGE</code>, then the node can make any conclusions about the arrival times of the message, and hence it has only level of knowledge 1. + If one node has <code>|arrivalTime +W - currentTime | &gt;= DLARGE</code>, then all nodes must have the same opinion, and hence that node has level of knowledge at least 2. + If one node has <code>|arrivalTime +W - currentTime | &gt;= 2*DLARGE</code>, then all nodes must have <code>|arrivalTime +W - currentTime | =&gt; DLARGE</code> guaranteeing level of knowledge 3. <img alt src=https://i.imgur.com/a5or78c.png></p> <p>For example, let us set <code>w</code> and <code>D</code> to 1 minute and 15 seconds respectively. Let's assume that the current time is 12:00:00 and we have to evaluate a new message with timestamp set at 11:59:45. Since 11:59:45 +1 minute&gt;12:00:00, the node will set the opinion to <code>LIKE</code>. Moreover, since |11:59:45+1 minute-12:00:00| is greater than 15 seconds, and also grater than 2*15 seconds, the node will set the level of knowledge for this opinion to 3 (i.e., the supermajority of the network should already have the same opinion).</p> <p>Consider now a new message with timestamp 11:59:10. Since 11:59:10+1 minute&gt;12:00:00, the node will set the opinion to <code>TRUE</code>. However, since |11:59:10+1 minute-12:00:00| is lower than 15 seconds, the node will set the level of knowledge for to 1, meaning that this message will be voted upon by FPC. </p> <p>In general, timestamps with level of knowledge 1 will be input into FPC, that will eventually trigger the <code>finalized</code> event, after which we may set a message as eligible or as discarded, depending on the outcome. If instead, the timestamp the node is considering has already level of knowledge larger or equal than 2, the node does not need to vote, but has to reply to queries. Either it is eligible (marked as liked) or it is marked as disliked. If the timestamp has level of knowledge 3, the node does not reply to FPC queries.</p> <p>With high probability, we can be sure that for any time <code>t</code>, no node can issue a message with timestamp <code>t</code> after <code>t + W + 2*DLARGE</code>, because after this time, the message would be considered to be bad with level of knowledge 3. Thus, assuming the node is in sync, see <a href=./6.5%20Node%20Perception%20Reorganization.md>Section 6.5 - Node Perception Reorganization</a>, after approximately 1.5 minutes, the number of messages of a particular timestamp cannot be altered. </p> <h2 id=623-transactions-and-fcob>6.2.3 Transactions and FCoB<a class=headerlink href=#623-transactions-and-fcob title="Permanent link">&para;</a></h2> <p>In this section, we discuss how to set the <code>opinionField</code> on transactions through the so-called FCoB rule. Recall that a transaction <code>X</code> satisfies the FCoB rule if the node has not received any transactions conflicting with <code>X</code> before <code>arrivalTime(X)+C</code>.</p> <h3 id=6231-fcob-function>6.2.3.1 FCoB function<a class=headerlink href=#6231-fcob-function title="Permanent link">&para;</a></h3> <p>We now define the function <code>FCOB</code> which decides the opinion of the transaction. When setting the opinion, the node simply sets <code>opinionField=FCOB(transactionID)</code>.<br> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=err>(</span><span class=nf>bool</span><span class=p>,</span><span class=n>level</span><span class=p>,</span><span class=n>time</span><span class=p>)</span> <span class=o>=</span> <span class=n>FCOB</span><span class=p>(</span><span class=n>transactionID</span><span class=p>)</span>
<span class=n>time</span> <span class=o>=</span> <span class=n>currentTime</span>
<span class=k>IF</span> <span class=n>transactionID</span> <span class=ow>IS</span> <span class=k>NOT</span> <span class=n>a</span> <span class=n>conflict</span>
    <span class=n>bool</span> <span class=o>=</span> <span class=k>TRUE</span>
    <span class=k>IF</span> <span class=n>currentTime</span> <span class=o>&lt;=</span> <span class=n>transactionID</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>+</span> <span class=n>C</span> <span class=o>+</span> <span class=n>DSMALL</span>
        <span class=n>level</span> <span class=o>=</span> <span class=mi>1</span>
    <span class=k>ELSE</span> <span class=k>IF</span> <span class=n>currentTime</span> <span class=o>&lt;=</span> <span class=n>transactionID</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>+</span> <span class=n>C</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>*</span> <span class=n>DSMALL</span>
        <span class=n>level</span> <span class=o>=</span> <span class=mi>2</span>
    <span class=k>ELSE</span> 
        <span class=n>level</span> <span class=o>=</span> <span class=mi>3</span>
<span class=k>ELSE</span>
    <span class=k>FOR</span> <span class=n>x</span> <span class=ow>IN</span> <span class=n>conflict</span> <span class=k>with</span> <span class=n>transactionID</span>
        <span class=k>IF</span> <span class=n>x</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>&gt;=</span> <span class=n>transactionID</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>+</span> <span class=n>C</span> <span class=ow>OR</span> <span class=p>(</span> <span class=n>x</span><span class=p>.</span><span class=n>opinionField</span><span class=p>.</span><span class=n>opinion</span> <span class=o>==</span> <span class=k>FALSE</span> <span class=ow>AND</span> <span class=n>x</span><span class=p>.</span><span class=n>opinionField</span><span class=p>.</span><span class=n>level</span> <span class=o>==</span> <span class=mi>2</span> <span class=ow>OR</span> <span class=mi>3</span><span class=p>)</span>
        <span class=n>bool</span> <span class=o>=</span> <span class=k>TRUE</span>
        <span class=n>level</span> <span class=o>=</span> <span class=mi>1</span>
<span class=k>ELSE</span> 
    <span class=n>conflictTime</span><span class=o>=</span> <span class=n>MIN</span><span class=p>(</span><span class=n>x</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=n>FORALL</span> <span class=n>x</span> <span class=n>conflicting</span> <span class=k>with</span> <span class=n>transactionID</span><span class=p>)</span>
    <span class=k>IF</span> <span class=n>transaction</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>+</span> <span class=n>C</span> <span class=o>&lt;=</span> <span class=n>conflictTime</span> 
        <span class=n>bool</span> <span class=o>=</span> <span class=k>TRUE</span>
    <span class=k>ELSE</span>
        <span class=n>bool</span> <span class=o>=</span> <span class=k>FALSE</span>
    <span class=k>If</span> <span class=err>|</span><span class=n>transaction</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>+</span> <span class=n>C</span> <span class=o>-</span> <span class=n>conflictTime</span><span class=err>|</span> <span class=o>&lt;=</span> <span class=n>DSMALL</span>
        <span class=n>level</span> <span class=o>=</span> <span class=mi>1</span>
    <span class=k>ELSE</span> <span class=k>IF</span> <span class=err>|</span><span class=n>transaction</span><span class=p>.</span><span class=n>arrivalTime</span> <span class=o>+</span> <span class=n>C</span> <span class=o>-</span> <span class=n>conflictTime</span><span class=err>|</span> <span class=o>&lt;=</span> <span class=mi>2D</span><span class=n>SMALL</span>
        <span class=n>level</span> <span class=o>=</span> <span class=mi>2</span>
    <span class=k>ELSE</span>
        <span class=n>level</span> <span class=o>=</span> <span class=mi>3</span>
<span class=k>RETURN</span> <span class=p>(</span><span class=n>bool</span><span class=p>,</span><span class=n>level</span><span class=p>,</span><span class=n>timeFormed</span><span class=p>)</span>
</code></pre></div> We now will explain the logical behind this function. There are three cases which are treated: 1. No conflicts have been detected 2. Conflicts have been detected but have been rejected 3. Conflicts have been detected are either pending or have been confirmed</p> <p>Case 3 is the simplest case: since conflicts have been detected, we set the opinion according to the FCOB rule. Then level is set according to the difference of <code>transaction.arrivalTime + C</code> and <code>conflictTime</code>, the oldest arrival time of a conflicting transaction. Essentially, the level measures how many network delays there are between these two values. </p> <p>In Case 1 is the most common because conflicts will never arrive for most transactions. Without conflicts, the opinion can be only set provisionally since it might change if a conflict arrives later. The opinion is set to true, but the level is set as if a conflict arrived at that time. For example, after <code>C + DSMALL</code> time has elapsed since arrival time, if a conflict does arrive the opinion will remain true with level at least 2. </p> <p>Lastly, Case 2 is an important special case of the FCoB rule. To see the need for this modification consider the following example. Suppose someone issues a pair of conflicting transactions where both transactions are rejected by FPC. Then, if someone ever issues a new transaction consuming those funds, FCoB, strictly speaking would reject the new transaction, since it would conflict with a previous transaction. Thus, if a pair of double spends are rejected, the funds would be locked. This is undesirable and impractical behavior: an honest but malfunctioning wallet can issue double spends. Moreover, tracking the locked funds would be onerous. </p> <p>To prevent the FCoB rule from locking funds, we modify it to the following: a transaction <code>X</code> satisfied the FCoB rule if all transactions <code>Y</code> conflicting with <code>X</code> before <code>arrivalTime(X)+C</code> has been rejected, i.e. has has opinion false and level 2 or 3. With this rule, any conflicts which are rejected will not affect the opinion on future conflicts. For simplicity case, all transactions falling under this case are treated as level 1.</p> <h3 id=6232-when-to-set-the-opinion>6.2.3.2 When to set the opinion<a class=headerlink href=#6232-when-to-set-the-opinion title="Permanent link">&para;</a></h3> <p>The protocol is actually flexible on when the opinion field of a transaction is set. However, the node must do the following. + The opinion of a transaction must be set after it is booked. When the transaction is booked, the node searches for conflicts, and if a conflict exists the node either creates a new conflict set or else it adds the transaction to an old conflict sets. If the <code>FCoB</code> function is called before the transaction is booked, it will be impossible to tell what conflicts exist. + The opinion field is <code>NULL</code> only if no conflicts have been detected + Fore very valid <code>transactionID</code>, the <code>transactionID.opinionField</code> is either NULL or "correct" at the times <code>transactionID.arrivalTime + C + DSMALL</code> and <code>transactionID.arrivalTime + C + 2DSMALL</code>, i.e. the opinion field would be unchanged if reset at that those two times. </p> <p>There are a plethora of ways this could be implemented. We give two examples. </p> <p>First, after a message is booked, its transaction, say <code>transactionID</code> is added to a timed queue. At <code>transactionID.arrivalTime + C + DSMall</code> the opinion is set, and then either the transaction is rejected (i.e. bad with level 2 or 3), voted upon (level 1), or goes to tip selection (good level 2). If no conflict has been detected, the transaction (i.e. the transaction is good level 2), the transaction is put in another timed queue. At time <code>transactionID.arrivalTime + C + 2DSMall</code> the opinion is reset. Note, once a conflict is detected the opinion field would not change, and so only transactions which are not part of conflict sets need to enter the second timed queue.</p> <p>Second, while a transaction is being booked, conflict detection can immediately trigger setting the opinion field for all the new conflicts. This would include the transaction itself and any members of its conflict set which previously had a <code>NULL</code> opinion field. This implementation has a few caveats: + Any transaction with a <code>NULL</code> opinion field must be treated as a "good" transaction. At any time, the appropriate level of knowledge could be computed by looking at the arrival time. + Before the monotonically liked flag is set, the transaction must be at least <code>transactionID.arrivalTime + C + DSMall</code> and have either opinion field <code>NULL</code> or (good, level 2 or 3). </p> <p>Although this is an implementation detail, we remark that after a transaction is booked, it is easy to see if a message is a conflict or not. Indeed, when a conflict is detected, a new branch is created, and the ID of that new branch is the same as the <code>transactionID</code>. Thus a transaction is a conflict if and only if <code>transactionID = transactionID.branchID</code>. See <a href=../5.2%20Ledger%20State/ >Section 5.2 - Ledger State</a>.</p> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2021-06-27 13:40:55</span> <br>Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2021-06-27 13:25:10</span> </small> </div> </article> <script>var tabs=__get("__tabs");if(Array.isArray(tabs))for(var set of document.querySelectorAll("[data-tabs]")){var labels=set.querySelectorAll(":scope > label");e:for(var tab of tabs)for(var label of labels)if(label.innerText.trim()===tab){var input=label.previousElementSibling;input.checked=!0;break e}}</script> </div> </div> <a href=# class="md-top md-icon" title="Back to top" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../6.1%20Objects%20of%20Consensus/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 6.1 Objects of Consensus" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> 6.1 Objects of Consensus </div> </div> </a> <a href=../6.3%20Fast%20Probabilistic%20Consensus/ class="md-footer__link md-footer__link--next" aria-label="Next: 6.3 Fast Probabilistic Consensus" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> 6.3 Fast Probabilistic Consensus </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2021 Zignar Technologies </div> </div> <div class=md-footer-social> <a href=https://twitter.com/zignartech target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://www.linkedin.com/company/zignar-technologies/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://github.com/zignar-technologies target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://discord.gg/pEBc77shev target=_blank rel=noopener title=discord.gg class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.indexes", "navigation.tracking", "navigation.top", "header.autohide", "content.tabs.link", "search.suggest", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.df8cae7d.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.82217815.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src=../../javascripts/tables.js></script> <script src=../../javascripts/stl_viewer/stl_viewer.min.js></script> <script src=../../javascripts/extra.js></script> <script src=../../overrides/assets/javascripts/bundle.428d89bf.min.js></script> </body> </html>