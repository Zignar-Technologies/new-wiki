<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta name=author content="Jorge Christian Gelso"><link href=https://docs.zignar.io/IOTA-NECTAR/4.2%20Timestamps/ rel=canonical><link rel=icon href=../../assets/favicon.svg><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.7+insiders-2.9.2"><title>4.2 Timestamps - Zignar Technologies Docs</title><link rel=stylesheet href=../../assets/stylesheets/main.92048cb8.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.73e53a79.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:300,400,400i,700%7CSource+Code+Pro&display=fallback"><style>:root{--md-text-font-family:"Montserrat";--md-code-font-family:"Source Code Pro"}</style><link rel=stylesheet href=../../stylesheets/extra.css><meta name=robots content=noindex><meta property=og:type content=website><meta property=og:title content="Zignar Technologies Docs - 4.2 Timestamps"><meta property=og:description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta content=https://docs.zignar.io/IOTA-NECTAR/4.2%20Timestamps/ property=og:url><meta property=og:image content=https://docs.zignar.io/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568><meta name=twitter:title content="Zignar Technologies Docs - 4.2 Timestamps"><meta name=twitter:description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta name=twitter:image content=https://docs.zignar.io/assets/images/banner.png><link rel=stylesheet href=../../overrides/assets/stylesheets/main.3cfa086a.min.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=red> <script>function __scope(t,e="../.."){return new URL(e,location).pathname+"."+t}function __get(t,e=localStorage,n){return JSON.parse(e.getItem(__scope(t,n)))}function __set(t,e,n=localStorage,o){try{n.setItem(__scope(t,o),JSON.stringify(e))}catch(t){}}</script> <script>var palette=__get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#42-timestamps class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> Zignar Technologies has it's own Documentation Website. For any improvements, please contact Chris at chris@zignar.tech </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Zignar Technologies Docs" class="md-header__button md-logo" aria-label="Zignar Technologies Docs" data-md-component=logo> <img src=../../assets/zignarlogo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Zignar Technologies Docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 4.2 Timestamps </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=light-blue data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Zignar-Technologies/wiki/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg> </div> <div class=md-source__repository> Zignar Docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> IOTA Nectar Specs </a> </li> <li class=md-tabs__item> <a href=../../projects/ class=md-tabs__link> Projects </a> </li> <li class=md-tabs__item> <a href=../../reference/basic-markdown/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../JTBD/barriers/ class=md-tabs__link> JTBD </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Zignar Technologies Docs" class="md-nav__button md-logo" aria-label="Zignar Technologies Docs" data-md-component=logo> <img src=../../assets/zignarlogo.png alt=logo> </a> Zignar Technologies Docs </label> <div class=md-nav__source> <a href=https://github.com/Zignar-Technologies/wiki/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg> </div> <div class=md-source__repository> Zignar Docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--container "> <a href=../ >IOTA Nectar Specs</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="IOTA Nectar Specs" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> IOTA Nectar Specs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../0.0%20Preface/ class=md-nav__link> 0.0 Preface </a> </li> <li class=md-nav__item> <a href=../1.1%20Introduction/ class=md-nav__link> 1.1 Introduction </a> </li> <li class=md-nav__item> <a href=../2.2%20Message%20Layout/ class=md-nav__link> 2.2 Message Layout </a> </li> <li class=md-nav__item> <a href=../2.3%20Standard%20Payloads%20Layout/ class=md-nav__link> 2.3 Standard Payloads Layout </a> </li> <li class=md-nav__item> <a href=../2.4%20Data%20flow/ class=md-nav__link> 2.4 Data flow </a> </li> <li class=md-nav__item> <a href=../3.3%20Peer%20Discovery/ class=md-nav__link> 3.3 Peer Discovery </a> </li> <li class=md-nav__item> <a href=../3.4%20Neighbor%20Selection/ class=md-nav__link> 3.4 Neighbor Selection </a> </li> <li class=md-nav__item> <a href=../4.1%20The%20Tangle/ class=md-nav__link> 4.1 The Tangle </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 4.2 Timestamps <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 4.2 Timestamps </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#421-motivation class=md-nav__link> 4.2.1 Motivation </a> </li> <li class=md-nav__item> <a href=#422-preliminaries class=md-nav__link> 4.2.2 Preliminaries </a> <nav class=md-nav aria-label="4.2.2 Preliminaries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4221-requirements class=md-nav__link> 4.2.2.1 Requirements </a> </li> <li class=md-nav__item> <a href=#4222-dependencies class=md-nav__link> 4.2.2.2 Dependencies </a> </li> <li class=md-nav__item> <a href=#4233-modules-dependent-on-timestamps class=md-nav__link> 4.2.3.3 Modules dependent on timestamps </a> </li> <li class=md-nav__item> <a href=#4224-parameters class=md-nav__link> 4.2.2.4 Parameters </a> </li> <li class=md-nav__item> <a href=#4225-clock-synchronization class=md-nav__link> 4.2.2.5 Clock synchronization </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#423-general-timestamp-rules class=md-nav__link> 4.2.3 General Timestamp rules </a> <nav class=md-nav aria-label="4.2.3 General Timestamp rules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4231-age-of-parents class=md-nav__link> 4.2.3.1 Age of parents </a> </li> <li class=md-nav__item> <a href=#4232-message-timestamp-vs-transaction-timestamp class=md-nav__link> 4.2.3.2 Message timestamp vs transaction timestamp </a> </li> <li class=md-nav__item> <a href=#4233-reattachments class=md-nav__link> 4.2.3.3 Reattachments </a> </li> <li class=md-nav__item> <a href=#4234-age-of-utxo class=md-nav__link> 4.2.3.4 Age of UTXO </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#424-consensus-on-timestamps class=md-nav__link> 4.2.4 Consensus on timestamps </a> <nav class=md-nav aria-label="4.2.4 Consensus on timestamps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4241-not-in-sync class=md-nav__link> 4.2.4.1 Not in Sync </a> </li> <li class=md-nav__item> <a href=#4242-future-timestamps class=md-nav__link> 4.2.4.2 Future Timestamps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#425-tangle-time class=md-nav__link> 4.2.5 Tangle Time </a> <nav class=md-nav aria-label="4.2.5 Tangle Time"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4251-motivation class=md-nav__link> 4.2.5.1 Motivation </a> </li> <li class=md-nav__item> <a href=#4252-tangle-time class=md-nav__link> 4.2.5.2 Tangle Time </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#426-epochs class=md-nav__link> 4.2.6 Epochs </a> </li> <li class=md-nav__item> <a href=#426-limitations class=md-nav__link> 4.2.6 Limitations </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../4.3%20Tip%20Selection%20Algorithm/ class=md-nav__link> 4.3 Tip Selection Algorithm </a> </li> <li class=md-nav__item> <a href=../4.4%20Solidification/ class=md-nav__link> 4.4 Solidification </a> </li> <li class=md-nav__item> <a href=../4.5%20Rate%20Control/ class=md-nav__link> 4.5 Rate Control </a> </li> <li class=md-nav__item> <a href=../4.6%20Congestion%20Control/ class=md-nav__link> 4.6 Congestion control </a> </li> <li class=md-nav__item> <a href=../4.7%20Markers/ class=md-nav__link> 4.7 Markers </a> </li> <li class=md-nav__item> <a href=../5.1%20UTXO/ class=md-nav__link> 5.1 UTXO </a> </li> <li class=md-nav__item> <a href=../5.2%20Ledger%20State/ class=md-nav__link> 5.2 Ledger State </a> </li> <li class=md-nav__item> <a href=../5.3%20Mana/ class=md-nav__link> 5.3 Mana </a> </li> <li class=md-nav__item> <a href=../6.1%20Objects%20of%20Consensus/ class=md-nav__link> 6.1 Objects of Consensus </a> </li> <li class=md-nav__item> <a href=../6.2%20Opinion%20Setting/ class=md-nav__link> 6.2 Opinion Setting </a> </li> <li class=md-nav__item> <a href=../6.3%20Fast%20Probabilistic%20Consensus/ class=md-nav__link> 6.3 Fast Probabilistic Consensus </a> </li> <li class=md-nav__item> <a href=../6.4%20Finalization/ class=md-nav__link> 6.4 Finalization </a> </li> <li class=md-nav__item> <a href=../6.5%20dRNG/ class=md-nav__link> 6.5 dRNG </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--container "> <a href=../../projects/ >Projects</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Projects data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--container "> <a href=../../projects/Imak/ >Imak</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Imak data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Imak </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--container "> <a href=../../projects/ayni/ >Ayni</a> <label for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Ayni data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Ayni </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__link--container "> <a href=../../projects/cannor/ >Cannor</a> <label for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Cannor data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Cannor </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--container "> <a href=../../reference/ >Reference</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/basic-markdown/ class=md-nav__link> Basic Markdown Guide </a> </li> <li class=md-nav__item> <a href=../../reference/abbreviations/ class=md-nav__link> Abbreviations </a> </li> <li class=md-nav__item> <a href=../../reference/buttons/ class=md-nav__link> Buttons </a> </li> <li class=md-nav__item> <a href=../../reference/code-blocks/ class=md-nav__link> Code blocks </a> </li> <li class=md-nav__item> <a href=../../reference/content-tabs/ class=md-nav__link> Content tabs </a> </li> <li class=md-nav__item> <a href=../../reference/data-tables/ class=md-nav__link> Data tables </a> </li> <li class=md-nav__item> <a href=../../reference/diagrams/ class=md-nav__link> Diagrams </a> </li> <li class=md-nav__item> <a href=../../reference/footnotes/ class=md-nav__link> Footnotes </a> </li> <li class=md-nav__item> <a href=../../reference/formatting/ class=md-nav__link> Formatting </a> </li> <li class=md-nav__item> <a href=../../reference/icons-emojis/ class=md-nav__link> Icons + Emojis </a> </li> <li class=md-nav__item> <a href=../../reference/images/ class=md-nav__link> Images </a> </li> <li class=md-nav__item> <a href=../../reference/lists/ class=md-nav__link> Lists </a> </li> <li class=md-nav__item> <a href=../../reference/mathjax/ class=md-nav__link> MathJax </a> </li> <li class=md-nav__item> <a href=../../reference/pdf/ class=md-nav__link> PDF Files Support </a> </li> <li class=md-nav__item> <a href=../../reference/progress/ class=md-nav__link> Progress Bar </a> </li> <li class=md-nav__item> <a href=../../reference/remarks/ class=md-nav__link> Remarks </a> </li> <li class=md-nav__item> <a href=../../reference/smartsymbols/ class=md-nav__link> Smart symbols </a> </li> <li class=md-nav__item> <a href=../../reference/stl/ class=md-nav__link> STL Files Support </a> </li> <li class=md-nav__item> <a href=../../reference/awesome/ class=md-nav__link> Customizing Navigation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> JTBD <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=JTBD data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> JTBD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../JTBD/barriers/ class=md-nav__link> Five barriers to innovation </a> </li> <li class=md-nav__item> <a href=../../JTBD/jtbd/ class=md-nav__link> What is Jobs-to-be-done </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#421-motivation class=md-nav__link> 4.2.1 Motivation </a> </li> <li class=md-nav__item> <a href=#422-preliminaries class=md-nav__link> 4.2.2 Preliminaries </a> <nav class=md-nav aria-label="4.2.2 Preliminaries"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4221-requirements class=md-nav__link> 4.2.2.1 Requirements </a> </li> <li class=md-nav__item> <a href=#4222-dependencies class=md-nav__link> 4.2.2.2 Dependencies </a> </li> <li class=md-nav__item> <a href=#4233-modules-dependent-on-timestamps class=md-nav__link> 4.2.3.3 Modules dependent on timestamps </a> </li> <li class=md-nav__item> <a href=#4224-parameters class=md-nav__link> 4.2.2.4 Parameters </a> </li> <li class=md-nav__item> <a href=#4225-clock-synchronization class=md-nav__link> 4.2.2.5 Clock synchronization </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#423-general-timestamp-rules class=md-nav__link> 4.2.3 General Timestamp rules </a> <nav class=md-nav aria-label="4.2.3 General Timestamp rules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4231-age-of-parents class=md-nav__link> 4.2.3.1 Age of parents </a> </li> <li class=md-nav__item> <a href=#4232-message-timestamp-vs-transaction-timestamp class=md-nav__link> 4.2.3.2 Message timestamp vs transaction timestamp </a> </li> <li class=md-nav__item> <a href=#4233-reattachments class=md-nav__link> 4.2.3.3 Reattachments </a> </li> <li class=md-nav__item> <a href=#4234-age-of-utxo class=md-nav__link> 4.2.3.4 Age of UTXO </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#424-consensus-on-timestamps class=md-nav__link> 4.2.4 Consensus on timestamps </a> <nav class=md-nav aria-label="4.2.4 Consensus on timestamps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4241-not-in-sync class=md-nav__link> 4.2.4.1 Not in Sync </a> </li> <li class=md-nav__item> <a href=#4242-future-timestamps class=md-nav__link> 4.2.4.2 Future Timestamps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#425-tangle-time class=md-nav__link> 4.2.5 Tangle Time </a> <nav class=md-nav aria-label="4.2.5 Tangle Time"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4251-motivation class=md-nav__link> 4.2.5.1 Motivation </a> </li> <li class=md-nav__item> <a href=#4252-tangle-time class=md-nav__link> 4.2.5.2 Tangle Time </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#426-epochs class=md-nav__link> 4.2.6 Epochs </a> </li> <li class=md-nav__item> <a href=#426-limitations class=md-nav__link> 4.2.6 Limitations </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href="https://github.com/Zignar-Technologies/wiki/tree/main/docs/IOTA-NECTAR/4.2 Timestamps.md" title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <script src=/javascripts/mathjax.js async></script> <h1 id=42-timestamps>4.2 Timestamps<a class=headerlink href=#42-timestamps title="Permanent link">&para;</a></h1> <h2 id=421-motivation>4.2.1 Motivation<a class=headerlink href=#421-motivation title="Permanent link">&para;</a></h2> <p>In order to enable snapshotting based on time constraints rather than special messages in the Tangle (e.g. checkpoints), nodes need to share the same perception of time. Specifically, they need to have consensus on the <em>age of messages</em>. This is one of the reasons that messages must contain a field <code>timestamp</code> which represents the creation time of the message and is signed by the issuing node. </p> <p>Having consensus on the creation time of messages enables not only total ordering but also new applications that require certain guarantees regarding time. Specifically, we use message timestamps to enforce timestamps in transactions, which may also be used in computing the Mana associated to a particular node ID. </p> <p>In this document, we propose a mechanism to achieve consensus on message timestamps by combining a synchronous and an asynchronous approach. While online nodes may leverage FPC to vote on timestamps, nodes that join the network at a later time use an approach based on the <em>approval weight</em> (described in <a href=../6.4%20Finalization/ >Section 6.4 - Approval Weight and Finality</a>) to determine the validity of timestamps. </p> <p>This specification also outlines a tool called "Epochs", which groups messages into different objective periods. This tool may be used for the following purposes: - <strong>finality and approval weight:</strong> the activity of certain nodes within an epoch can be recorded, and then the approval weight (i.e. the number of nodes, weighted by consensus, which issued a message referencing a particular message) can then be measured as a percentage of "active consensus mana". - <strong>committee selection:</strong> a committee elected as the highest active consensus mana holders can be easily and objectively formed for the DRNG committee. </p> <h2 id=422-preliminaries>4.2.2 Preliminaries<a class=headerlink href=#422-preliminaries title="Permanent link">&para;</a></h2> <h3 id=4221-requirements>4.2.2.1 Requirements<a class=headerlink href=#4221-requirements title="Permanent link">&para;</a></h3> <p>In DLTs, there are many ways to potentially introduce timestamps. Any useful timestamping scheme however must satisfy the following requirements.<br> 1. Nodes must have consensus on the timestamp associated to each message. 2. For every time <code>t</code>, there is a <code>t_1&gt;t</code> such that any new message issued with timestamp <code>t</code> and received by a node after <code>t_1</code> (measured by its local clock) will be considered too far in the past and will be orphaned. </p> <h3 id=4222-dependencies>4.2.2.2 Dependencies<a class=headerlink href=#4222-dependencies title="Permanent link">&para;</a></h3> <ul> <li>Opinion Setting</li> <li>FPC: used to perform voting on timestamps.</li> <li>Approval weight: corrects opinions on timestamps when out of sync.</li> </ul> <h3 id=4233-modules-dependent-on-timestamps>4.2.3.3 Modules dependent on timestamps<a class=headerlink href=#4233-modules-dependent-on-timestamps title="Permanent link">&para;</a></h3> <ul> <li>Tip selection: only messages with correct timestamps will be eligible for tip selection.</li> <li>Active Consensus Mana in approval weight uses epochs.</li> <li>DRNG uses Epochs.</li> <li>The Congestion control orders messages by timestamps, and only processes messages whose timestamp is close to the current time. </li> <li>The rate control system uses timestamps to compute the correct PoWs.</li> <li>The snapshotting uses timestamps to determine which messages to prune from the tangle.</li> </ul> <h3 id=4224-parameters>4.2.2.4 Parameters<a class=headerlink href=#4224-parameters title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>DLARGE</code></td> <td>duration</td> <td>Gratuitous network delay estimate~ 15 s</td> </tr> <tr> <td><code>W</code></td> <td>duration</td> <td>window ~1 minute. Require W&gt;2DLARGE</td> </tr> <tr> <td><code>DELTA</code></td> <td>duration</td> <td>Maximal difference between a message timestamp and its parents' message timestamp. Require DELTA&gt;W+DLARGE</td> </tr> <tr> <td><code>TW</code></td> <td>duration</td> <td>Maximal difference between message timestamp and transaction timestamp</td> </tr> <tr> <td><code>EPOCHLENGTH</code></td> <td>duration</td> <td>Length of each epoch = 1 hour</td> </tr> <tr> <td><code>SYNCH_THRESHOLD</code></td> <td>duration</td> <td>the max difference between <code>CurrentTime</code> and <code>TangleTime</code> in which we consider our node in sync</td> </tr> <tr> <td><code>TIMESTAMP_CUTOFF</code></td> <td>duration</td> <td>messages with timestamp older than this will be disliked with level 3 knowledge</td> </tr> </tbody> </table> <h3 id=4225-clock-synchronization>4.2.2.5 Clock synchronization<a class=headerlink href=#4225-clock-synchronization title="Permanent link">&para;</a></h3> <p>Nodes need to share a reasonably similar perception of time in order to effectively judge the accuracy of timestamps. Therefore, we propose that nodes synchronize their clock on startup and resynchronize periodically every <code>60min</code> to counter <a href=https://en.wikipedia.org/wiki/Clock_drift>drift</a> of local clocks. Instead of changing a nodes' system clock, we introduce an <code>offset</code> parameter to adjust for differences between <em>network time</em> and local time of a node. Initially, the <a href=https://en.wikipedia.org/wiki/Network_Time_Protocol>Network Time Protocol (NTP)</a> (<a href=https://github.com/beevik/ntp>Go implementation</a>) may be used to achieve this task. </p> <p>We gracefully shut down the node if: - initial synchronization of time fails - resynchronization fails for more than <code>maxSyncAttempts</code> times </p> <h2 id=423-general-timestamp-rules>4.2.3 General Timestamp rules<a class=headerlink href=#423-general-timestamp-rules title="Permanent link">&para;</a></h2> <p>Every message contains a timestamp, which is signed by the issuing node. Thus the timestamp itself is objective and immutable. Furthermore, transactions will also contain a timestamp, which will be also signed and thus immutable. We first discuss the rules regarding message timestamps.</p> <p>In order for a message to be eligible for tip selection, the timestamp of every message in its past cone (both weak and strong) must satisfy certain requirements. These requirements fall into two categories: objective and subjective. The objective criteria only depend on information written directly in the Tangle and are applied immediately upon solidification. Thus all nodes immediately have consensus on the objective criteria. In this section, we will discuss these objective criteria.</p> <p>The quality of the timestamp is a subjective criterion since it is based on the solidification time of the message. Thus, nodes must use a consensus algorithm, e.g. FPC, to decide which messages should be rejected based on subjective criteria. Specifically, nodes will use FPC to vote on whether or not a timestamp plus <code>W</code> is before the arrival time. </p> <p>Consensus matters are not discussed in this document: see sections <a href=../6.1%20Objects%20of%20Consensus/ >6.1</a>, <a href=../6.2%20Opinion%20Setting/ >6.2</a> and <a href=../6.3%20Fast%20Probabilistic%20Consensus/ >6.3</a> to discuss how FPC votes on timestamps. </p> <p>Lastly, for any time <code>t</code>, a node is sure that it has received all the messages with timestamp less than <code>t</code> which will be finalized when + <code>CurrentTime &gt;= t + TIMESTAMP_CUTOFF = t + W + 2*DLARGE</code>, i.e. wait ~1.5 minutes + <code>SyncStatus = TRUE</code> Indeed, after <code>TIMESTAMP_CUTOFF = W + 2*DLARGE</code> all messages which arrive will be considered bad with level of knowledge 3: see <a href=/6.1%20Objects%20of%20Consensus.md>Section 6.1 - Object of Consensus</a>. If the node is in sync, then it will have received all old messages which will be confirmed. </p> <h3 id=4231-age-of-parents>4.2.3.1 Age of parents<a class=headerlink href=#4231-age-of-parents title="Permanent link">&para;</a></h3> <p>It is problematic when incoming messages reference extremely old messages. If any new message may reference any message in the Tangle, then a node will need to keep all messages readily available, precluding snapshotting. For this reason, we require that the difference between the timestamp of a message and the timestamp of its parents must be at most <code>DELTA</code> units of time. Additionally, we require that timestamps are monotonic, i.e. parents must have a timestamp smaller than their children's timestamps.</p> <h3 id=4232-message-timestamp-vs-transaction-timestamp>4.2.3.2 Message timestamp vs transaction timestamp<a class=headerlink href=#4232-message-timestamp-vs-transaction-timestamp title="Permanent link">&para;</a></h3> <p>Transactions contain a timestamp that is signed by the user when creating the transaction. It is thus different from the timestamp in the message which is created and signed by the node. We require <div class=highlight><pre><span></span><code>transaction.timestamp+TW &gt;= message.timestamp &gt;= transaction.timestamp
</code></pre></div> where <code>TW</code> defines the maximum allowed difference between both timestamps.</p> <p>If a node receives a transaction from a user with an invalid timestamp it does not create a message but discards the transaction with a corresponding error message to the user. To prevent a user's local clock differences causing issues the node should offer an API endpoint to retrieve its <code>SyncedTime</code> according to the network time. </p> <h3 id=4233-reattachments>4.2.3.3 Reattachments<a class=headerlink href=#4233-reattachments title="Permanent link">&para;</a></h3> <p>Reattachments of a transaction are possible during the time window <code>TW</code>. Specifically, a transaction may be reattached in a new message as long as the condition <code>message.timestamp-TW &gt;= transaction.timestamp</code> is fulfilled. If for some reason a transaction is not <em>picked up</em> (even after reattachment) and thus being orphaned, the user needs to create a new transaction with a current timestamp. </p> <h3 id=4234-age-of-utxo>4.2.3.4 Age of UTXO<a class=headerlink href=#4234-age-of-utxo title="Permanent link">&para;</a></h3> <p>Inputs to a transaction (unspent outputs) inherit their spent time from the transaction timestamp. Similarly, unspent outputs inherit their creation time from the transaction timestamp as well. For a transaction to be considered valid we require <div class=highlight><pre><span></span><code>transaction.timestamp &gt;= inputs.timestamp
</code></pre></div> In other words, all inputs to a transaction need to have a smaller or equal timestamp than the transaction. In turn, all created unspent outputs will have a greater or equal timestamp than all inputs.</p> <h2 id=424-consensus-on-timestamps>4.2.4 Consensus on timestamps<a class=headerlink href=#424-consensus-on-timestamps title="Permanent link">&para;</a></h2> <p>The accuracy of the timestamps will be enforced through FPC voting. Specifically, FPC will allow nodes to come to consensus on whether or not <code>timestamp+W</code> is greater than the arrival time: see <a href=../6.2%20Opinion%20Setting/ >Section 6.2 - Opinion Setting</a>. Messages which are deemed to fail this criterion will be rejected. Messages whose entire past cone is both valid, and satisfies this criterion, will be flagged as <code>eligible</code> and can be referenced messages selected by the Tip Selection Algorithm: see <a href=../4.3%20Tip%20Selection%20Algorithm/ >Section 4.3 - Tip Selection Algorithm</a>.</p> <h3 id=4241-not-in-sync>4.2.4.1 Not in Sync<a class=headerlink href=#4241-not-in-sync title="Permanent link">&para;</a></h3> <p>Any node not in sync will receive messages much later than the rest of the network. Thus, all messages will appear to have inaccurate timestamps and will be wrongfully rejected by the algorithms in <a href=../6.2%20Opinion%20Setting/ >Section 6.2 - Opinion Setting</a>. Thus nodes will not actively participate in any voting until their status is in sync, see Section 4.2.5. </p> <p>In general, a node that just completed the syncing phase must check, for each message, how much mana is in its future cone and set the opinion accordingly.</p> <p>More specifically: 1. Run the solidification up to being in sync (by following beacons) 2. Derive local markers 3. Decide eligibility for every message (5-10% mana min threshold)</p> <p>Clearly this synchronization procedure may only work to make an apparently bad timestamp reset to be a good timestamp. For example, if a node receives a message one day later than the rest of the network, the node will initially reject the timestamp. However, the resync mechanism will recognize the message is correct because it is buried under an entire day's worth of messages. </p> <p>What about the converse situation? Being out of sync will only delay the arrival of a message. If a node receives a message with a timestamp satisfying <code>timestamp+W&gt;arrivalTime</code>, this condition would also be satisfied for all nodes which received the message earlier. Thus, if a node is out of sync and is receiving messages later than everyone else, if this node likes a timestamp, all other notes will have already liked it. Therefore, nodes will not like timestamps which were previously rejected by most of the network. </p> <h3 id=4242-future-timestamps>4.2.4.2 Future Timestamps<a class=headerlink href=#4242-future-timestamps title="Permanent link">&para;</a></h3> <p>Note that the resync mechanism only works because we only dislike a message if it is too old. If we disliked messages whose timestamps were in the future, then it is possible that some nodes would like it, and others disliked it. Suppose for example at 11:00:00 a node issues a message <code>X</code> with timestamp 12:00:00, and that then all nodes rejected this timestamp for being too far in the future. Now suppose at 12:00:00 a new node <code>N</code> joins the network at receives <code>X</code>. According to node <code>N</code>, the timestamp of <code>X</code> is accurate, and will accept it, while other nodes will reject it. The resynchronization mechanism fails in this case. </p> <p>To protect against messages with a timestamp that is issued in the future, the <a href=../4.6%20Congestion%20Control/ >congestion control algorithm</a> does not schedule the message until the timestamp is less than or equal to <code>CurrentTime</code>. Thus messages from the future will not be added to the Tangle until the appropriate time. If an attacker sends too many future messages, these messages may overload the scheduler's queues. However, this is a standard type of attack that the congestion control algorithm is prepared to handle. </p> <h2 id=425-tangle-time>4.2.5 Tangle Time<a class=headerlink href=#425-tangle-time title="Permanent link">&para;</a></h2> <h3 id=4251-motivation>4.2.5.1 Motivation<a class=headerlink href=#4251-motivation title="Permanent link">&para;</a></h3> <p>For a variety of reasons, a node needs to be able to determine if it is in sync with the rest of the network, including the following: + to signal to clients that its perception is healthy, + to know when to issue messages (nodes out of sync should not issue messages, lest they are added to the wrong part of the Tangle), + to schedule messages at the correct rate: out of sync nodes should schedule faster in order to catch up with the network, + and to optimize FPC: nodes should not query while syncing, but instead rely on the approval weight. </p> <h3 id=4252-tangle-time>4.2.5.2 Tangle Time<a class=headerlink href=#4252-tangle-time title="Permanent link">&para;</a></h3> <p>Every DLT is a clock, or more specifically a network of synchronized clocks. This clock has a natural correspondence with "real time". If the DLT clock differs significantly from local time, then the we can conclude that our DLT clock is off from all the other clocks, and thus the node is out of sync. </p> <p>For IOTA 2.0, we make precise the meaning of the DLT clock with what we dub "Tangle time".<br> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>Time</span> <span class=o>=</span> <span class=n>TangleTime</span>
 <span class=k>RETURN</span> <span class=n>largest</span> <span class=n>timestamp</span> <span class=k>of</span> <span class=n>all</span> <span class=n>grade</span> <span class=mi>3</span> <span class=n>final</span> <span class=n>messages</span>
 <span class=err>```</span>
<span class=n>Thus</span> <span class=n>Tangle</span> <span class=n>time</span> <span class=ow>is</span> <span class=n>the</span> <span class=n>last</span> <span class=n>timestamp</span> <span class=ow>in</span> <span class=n>a</span> <span class=n>message</span> <span class=n>which</span> <span class=n>was</span> <span class=n>been</span> <span class=n>confirmed</span><span class=p>.</span> <span class=n>Tangle</span> <span class=n>time</span> <span class=n>cannot</span> <span class=n>be</span> <span class=n>attacked</span> <span class=n>without</span> <span class=n>controlling</span> <span class=n>enough</span> <span class=n>mana</span> <span class=k>to</span> <span class=n>accept</span> <span class=n>incorrect</span> <span class=n>timestamps</span><span class=p>,</span> <span class=n>making</span> <span class=n>it</span> <span class=n>a</span> <span class=n>reliable</span><span class=p>,</span> <span class=n>attack</span><span class=o>-</span><span class=n>resistant</span> <span class=n>quantity</span><span class=p>.</span>

 <span class=n>Typically</span> <span class=n>speaking</span><span class=p>,</span> <span class=err>`</span><span class=n>CurrentTime</span> <span class=o>-</span> <span class=n>TangleTime</span><span class=err>`</span> <span class=ow>is</span><span class=p>,</span> <span class=k>on</span> <span class=n>average</span><span class=p>,</span> <span class=n>the</span>  <span class=n>approximate</span> <span class=n>confirmation</span> <span class=n>time</span> <span class=k>of</span> <span class=n>messages</span><span class=p>.</span>  <span class=n>Thus</span><span class=p>,</span> <span class=k>if</span> <span class=n>this</span> <span class=n>difference</span> <span class=ow>is</span> <span class=n>too</span> <span class=n>far</span> <span class=n>off</span><span class=p>,</span> <span class=k>then</span> <span class=n>we</span> <span class=n>can</span> <span class=n>conclude</span> <span class=n>that</span> <span class=n>we</span> <span class=k>do</span> <span class=k>not</span> <span class=n>know</span> <span class=n>which</span> <span class=n>messages</span> <span class=n>are</span> <span class=n>confirmed</span> <span class=ow>and</span> <span class=n>thus</span> <span class=n>we</span> <span class=n>are</span> <span class=n>out</span> <span class=k>of</span> <span class=n>sync</span><span class=p>.</span>  <span class=ow>In</span> <span class=n>this</span> <span class=n>spirit</span><span class=p>,</span> <span class=n>we</span> <span class=n>are</span> <span class=n>able</span> <span class=k>to</span> <span class=n>define</span> <span class=n>the</span> <span class=n>following</span> <span class=n>two</span> <span class=n>functions</span><span class=p>.</span> 
<span class=err>```</span><span class=n>vbnet</span>
<span class=k>FUNCTION</span> <span class=nf>Time</span> <span class=o>=</span> <span class=n>SyncAmount</span>
<span class=k>RETURN</span> <span class=n>CurrentTime</span> <span class=o>-</span> <span class=n>TangleTime</span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>bool</span> <span class=o>=</span> <span class=n>SyncStatus</span>
<span class=k>IF</span> <span class=n>SyncAmount</span> <span class=o>&lt;=</span> <span class=n>SYNCH_THRESHOLD</span>
    <span class=k>RETURN</span> <span class=k>TRUE</span>
<span class=k>ELSE</span>
    <span class=k>RETURN</span> <span class=k>FALSE</span>
</code></pre></div> <img alt src=https://i.imgur.com/rndN8qc.jpg></p> <h2 id=426-epochs>4.2.6 Epochs<a class=headerlink href=#426-epochs title="Permanent link">&para;</a></h2> <p>Epochs are universal time intervals that group messages in the Tangle based on their timestamps. - An epoch is identified by its unique epoch index. Epoch indices are strictly increasing with respect to time. - Every time interval <code>EPOCHLENGTH</code>, a new epoch is started and the previous ends. - A message <code>M</code> or a transaction belongs to an <code>Epoch X</code>, if its timestamp falls into the time window of <code>Epoch X</code> such that T(<code>M</code>)∈ [t<sub>X-1</sub>, t<sub>X</sub>), where - T(<code>M</code>) is the timestamp of message <code>M</code>, - t<sub>x-1</sub> is the end of the previous epoch, - and t<sub>x</sub> is the end of <code>Epoch X</code>. - A transaction might not be in the same epoch as the message containing it. - The start of the network corresponds to t<sub>1</sub>, that is the end of <code>Epoch 1</code>. - <code>Epoch 0</code> and <code>Epoch 1</code> are special epochs, since they only contain the genesis message(s), and their content is defined before starting the network. These two epochs might be used to initialize the network and active consensus mana states to a desired values. - For every network, the end of <code>Epoch 0</code> is defined as an arbitrary point in time, similarly to how <a href=https://en.wikipedia.org/wiki/Unix_time>Unix epoch time</a> is defined as 00:00:00 UTC on 1 January 1970. - Epoch interval <code>EPOCHLENGTH</code> cannot be chosen arbitrarily: it must be much larger than <code>DELTA</code>. Furthermore, short epochs can potentially cause make certain calculations involving the approval wait more complicated.</p> <p>Figure 1 gives a brief overview of how the Tangle is divided into epochs:</p> <p><img alt src=https://i.imgur.com/5mZYAO8.png></p> <p><code>Epoch 0</code> contains the genesis message(s), that hold the genesis output(s). By allowing multiple outputs to exist before the start of the network, a desired initial state for the network can be set. <code>Epoch 2</code> is the first epoch after the start of the network, when nodes may start issuing messages. Note, that a message can be valid with one strong parent only.</p> <p>Upon processing a message and verifying its timestamp as described in <a href=../6.2%20Opinion%20Setting/ >Opinion Setting Specification</a>, the message is solidified and can be added to the epoch. <code>Epoch 2</code> ends at t<sub>2</sub>, but it can happen that a message is issued just before t<sub>2</sub>, therefore it reaches most nodes and gets solidified during <code>Epoch 3</code>. In this case, the node can still determine the correct epoch the message belongs to due to the consensus on the message timestamp. This also means, that finalizing an epoch (declaring that no more messages can be added to it) is delayed after the end of the epoch by at least <code>W</code> time.</p> <h2 id=426-limitations>4.2.6 Limitations<a class=headerlink href=#426-limitations title="Permanent link">&para;</a></h2> <ul> <li>When not in sync, a different behavior is required which complicates the protocol.</li> <li>Using NTP as clock synchronization mechanism as proposed is a single point of failure. It can only be considered as an initial implementation into GoShimmer and needs to be replaced by a decentralized alternative.</li> </ul> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2021-06-11 11:16:02</span> <br>Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2021-06-11 11:02:01</span> </small> </div> </article> <script>var tabs=__get("__tabs");if(Array.isArray(tabs))for(var set of document.querySelectorAll("[data-tabs]")){var labels=set.querySelectorAll(":scope > label");e:for(var tab of tabs)for(var label of labels)if(label.innerText.trim()===tab){var input=label.previousElementSibling;input.checked=!0;break e}}</script> </div> </div> <a href=# class="md-top md-icon" title="Back to top" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../4.1%20The%20Tangle/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 4.1 The Tangle" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> 4.1 The Tangle </div> </div> </a> <a href=../4.3%20Tip%20Selection%20Algorithm/ class="md-footer__link md-footer__link--next" aria-label="Next: 4.3 Tip Selection Algorithm" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> 4.3 Tip Selection Algorithm </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2021 Zignar Technologies </div> </div> <div class=md-footer-social> <a href=https://twitter.com/zignartech target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://www.linkedin.com/company/zignar-technologies/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://github.com/zignar-technologies target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://discord.gg/pEBc77shev target=_blank rel=noopener title=discord.gg class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.indexes", "navigation.tracking", "navigation.top", "header.autohide", "content.tabs.link", "search.suggest", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.df8cae7d.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.82217815.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src=../../javascripts/tables.js></script> <script src=../../javascripts/stl_viewer/stl_viewer.min.js></script> <script src=../../javascripts/extra.js></script> <script src=../../overrides/assets/javascripts/bundle.428d89bf.min.js></script> </body> </html>