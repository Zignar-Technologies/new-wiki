<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta name=author content="Jorge Christian Gelso"><link href=https://docs.zignar.io/IOTA-NECTAR/5.3%20Mana/ rel=canonical><link rel=icon href=../../assets/favicon.svg><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.7+insiders-2.9.2"><title>5.3 Mana - Zignar Technologies Docs</title><link rel=stylesheet href=../../assets/stylesheets/main.92048cb8.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.73e53a79.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:300,400,400i,700%7CSource+Code+Pro&display=fallback"><style>:root{--md-text-font-family:"Montserrat";--md-code-font-family:"Source Code Pro"}</style><link rel=stylesheet href=../../stylesheets/extra.css><meta name=robots content=noindex><meta property=og:type content=website><meta property=og:title content="Zignar Technologies Docs - 5.3 Mana"><meta property=og:description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta content=https://docs.zignar.io/IOTA-NECTAR/5.3%20Mana/ property=og:url><meta property=og:image content=https://docs.zignar.io/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568><meta name=twitter:title content="Zignar Technologies Docs - 5.3 Mana"><meta name=twitter:description content="Developing cyber-physical systems for Industry 4.0 requires great documentation. Our goal is to guarantee functionality and interoperability between the World, IoT, Software & AI, and DLT. We WILL make it happen !!!"><meta name=twitter:image content=https://docs.zignar.io/assets/images/banner.png><link rel=stylesheet href=../../overrides/assets/stylesheets/main.3cfa086a.min.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=red> <script>function __scope(t,e="../.."){return new URL(e,location).pathname+"."+t}function __get(t,e=localStorage,n){return JSON.parse(e.getItem(__scope(t,n)))}function __set(t,e,n=localStorage,o){try{n.setItem(__scope(t,o),JSON.stringify(e))}catch(t){}}</script> <script>var palette=__get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#53-mana class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> Zignar Technologies has it's own Documentation Website. For any improvements, please contact Chris at chris@zignar.tech </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Zignar Technologies Docs" class="md-header__button md-logo" aria-label="Zignar Technologies Docs" data-md-component=logo> <img src=../../assets/zignarlogo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Zignar Technologies Docs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 5.3 Mana </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=light-blue data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Zignar-Technologies/wiki/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg> </div> <div class=md-source__repository> Zignar Docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> IOTA Nectar Specs </a> </li> <li class=md-tabs__item> <a href=../../projects/ class=md-tabs__link> Projects </a> </li> <li class=md-tabs__item> <a href=../../reference/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../JTBD/barriers/ class=md-tabs__link> JTBD </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Zignar Technologies Docs" class="md-nav__button md-logo" aria-label="Zignar Technologies Docs" data-md-component=logo> <img src=../../assets/zignarlogo.png alt=logo> </a> Zignar Technologies Docs </label> <div class=md-nav__source> <a href=https://github.com/Zignar-Technologies/wiki/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg> </div> <div class=md-source__repository> Zignar Docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--container "> <a href=../ >IOTA Nectar Specs</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="IOTA Nectar Specs" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> IOTA Nectar Specs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../0.0%20Preface/ class=md-nav__link> 0.0 Preface </a> </li> <li class=md-nav__item> <a href=../1.1%20Introduction/ class=md-nav__link> 1.1 Introduction </a> </li> <li class=md-nav__item> <a href=../2.2%20Message%20Layout/ class=md-nav__link> 2.2 Message Layout </a> </li> <li class=md-nav__item> <a href=../2.3%20Standard%20Payloads%20Layout/ class=md-nav__link> 2.3 Standard Payloads Layout </a> </li> <li class=md-nav__item> <a href=../2.4%20Data%20flow/ class=md-nav__link> 2.4 Data flow </a> </li> <li class=md-nav__item> <a href=../3.3%20Peer%20Discovery/ class=md-nav__link> 3.3 Peer Discovery </a> </li> <li class=md-nav__item> <a href=../3.4%20Neighbor%20Selection/ class=md-nav__link> 3.4 Neighbor Selection </a> </li> <li class=md-nav__item> <a href=../4.1%20The%20Tangle/ class=md-nav__link> 4.1 The Tangle </a> </li> <li class=md-nav__item> <a href=../4.2%20Timestamps/ class=md-nav__link> 4.2 Timestamps </a> </li> <li class=md-nav__item> <a href=../4.3%20Tip%20Selection%20Algorithm/ class=md-nav__link> 4.3 Tip Selection Algorithm </a> </li> <li class=md-nav__item> <a href=../4.4%20Solidification/ class=md-nav__link> 4.4 Solidification </a> </li> <li class=md-nav__item> <a href=../4.5%20Rate%20Control/ class=md-nav__link> 4.5 Rate Control </a> </li> <li class=md-nav__item> <a href=../4.6%20Congestion%20Control/ class=md-nav__link> 4.6 Congestion control </a> </li> <li class=md-nav__item> <a href=../4.7%20Markers/ class=md-nav__link> 4.7 Markers </a> </li> <li class=md-nav__item> <a href=../5.1%20UTXO/ class=md-nav__link> 5.1 UTXO </a> </li> <li class=md-nav__item> <a href=../5.2%20Ledger%20State/ class=md-nav__link> 5.2 Ledger State </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> 5.3 Mana <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> 5.3 Mana </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#detailed-design-general class=md-nav__link> Detailed Design - General </a> </li> <li class=md-nav__item> <a href=#detailed-design-consensus-mana class=md-nav__link> Detailed Design - Consensus Mana </a> </li> <li class=md-nav__item> <a href=#consensus-mana-update-procedure class=md-nav__link> Consensus Mana update procedure </a> <nav class=md-nav aria-label="Consensus Mana update procedure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pledging-the-cmana-relative-to-a-transaction-with-timestamp-smaller-than-the-last-reference-time class=md-nav__link> Pledging the cMana relative to a transaction with timestamp smaller than the last reference time </a> </li> <li class=md-nav__item> <a href=#pledging-the-cmana-relative-to-a-transaction-with-timestamp-larger-than-the-last-reference-time class=md-nav__link> Pledging the cMana relative to a transaction with timestamp larger than the last reference time </a> </li> <li class=md-nav__item> <a href=#updating-the-cmana-to-a-time-larger-than-the-last-reference-time-without-any-new-cmana-pledging class=md-nav__link> Updating the cMana to a time larger than the last reference time without any new cMana pledging </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4332-active-consensus-mana-and-epochs class=md-nav__link> 4.3.3.2 Active Consensus Mana and Epochs </a> </li> <li class=md-nav__item> <a href=#detailed-design-access-mana class=md-nav__link> Detailed Design - Access Mana </a> </li> <li class=md-nav__item> <a href=#access-mana-update-procedure class=md-nav__link> Access Mana update procedure </a> <nav class=md-nav aria-label="Access Mana update procedure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pledging-the-amana-relative-to-a-transaction-with-timestamp-smaller-than-the-last-reference-time class=md-nav__link> Pledging the aMana relative to a transaction with timestamp smaller than the last reference time </a> </li> <li class=md-nav__item> <a href=#pledging-the-amana-relative-to-a-transaction-with-timestamp-larger-than-the-last-reference-time class=md-nav__link> Pledging the aMana relative to a transaction with timestamp larger than the last reference time </a> </li> <li class=md-nav__item> <a href=#updating-the-amana-to-a-time-larger-than-the-last-reference-time-without-any-new-amana-pledging class=md-nav__link> Updating the aMana to a time larger than the last reference time without any new aMana pledging. </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#initialization class=md-nav__link> Initialization </a> </li> <li class=md-nav__item> <a href=#algorithm class=md-nav__link> Algorithm </a> <nav class=md-nav aria-label=Algorithm> <ul class=md-nav__list> <li class=md-nav__item> <a href=#parameter-values class=md-nav__link> Parameter Values </a> </li> <li class=md-nav__item> <a href=#local-variables-and-built-in-functions class=md-nav__link> Local Variables and Built-in Functions </a> </li> <li class=md-nav__item> <a href=#pseudocode-cmana-update class=md-nav__link> Pseudocode - cMana Update </a> </li> <li class=md-nav__item> <a href=#updatebasecmanatrtransaction class=md-nav__link> UpdateBasecManaTr(transaction) </a> </li> <li class=md-nav__item> <a href=#updatecmanatimeepoch class=md-nav__link> UpdatecManaTime(epoch) </a> </li> <li class=md-nav__item> <a href=#updatecmanatrepochtransaction class=md-nav__link> UpdatecManaTr(epoch,transaction) </a> </li> <li class=md-nav__item> <a href=#updatecmanaepoch class=md-nav__link> UpdatecMana(epoch) </a> </li> <li class=md-nav__item> <a href=#pseudocode-amana-update class=md-nav__link> Pseudocode - aMana Update </a> </li> <li class=md-nav__item> <a href=#updatebaseamanatimet class=md-nav__link> UpdateBaseaManaTime(t) </a> </li> <li class=md-nav__item> <a href=#updateamanatimet class=md-nav__link> UpdateaManaTime(t) </a> </li> <li class=md-nav__item> <a href=#updatebaseamanatrtransaction class=md-nav__link> UpdateBaseaManaTr(transaction) </a> </li> <li class=md-nav__item> <a href=#updateamanatrtransaction class=md-nav__link> UpdateaManaTr(transaction) </a> </li> <li class=md-nav__item> <a href=#updateamanatransaction class=md-nav__link> UpdateaMana(transaction) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../6.1%20Objects%20of%20Consensus/ class=md-nav__link> 6.1 Objects of Consensus </a> </li> <li class=md-nav__item> <a href=../6.2%20Opinion%20Setting/ class=md-nav__link> 6.2 Opinion Setting </a> </li> <li class=md-nav__item> <a href=../6.3%20Fast%20Probabilistic%20Consensus/ class=md-nav__link> 6.3 Fast Probabilistic Consensus </a> </li> <li class=md-nav__item> <a href=../6.4%20Finalization/ class=md-nav__link> 6.4 Finalization </a> </li> <li class=md-nav__item> <a href=../6.5%20dRNG/ class=md-nav__link> 6.5 dRNG </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <div class="md-nav__link md-nav__link--container "> <a href=../../projects/ >Projects</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Projects data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <div class="md-nav__link md-nav__link--container "> <a href=../../projects/Imak/ >Imak</a> <label for=__nav_3_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Imak data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Imak </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__link--container "> <a href=../../projects/ayni/ >Ayni</a> <label for=__nav_3_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Ayni data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Ayni </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__link--container "> <a href=../../projects/cannor/ >Cannor</a> <label for=__nav_3_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Cannor data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Cannor </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <div class="md-nav__link md-nav__link--container "> <a href=../../reference/ >Reference</a> <label for=__nav_4> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/abbreviations/ class=md-nav__link> Abbreviations </a> </li> <li class=md-nav__item> <a href=../../reference/buttons/ class=md-nav__link> Buttons </a> </li> <li class=md-nav__item> <a href=../../reference/code-blocks/ class=md-nav__link> Code blocks </a> </li> <li class=md-nav__item> <a href=../../reference/content-tabs/ class=md-nav__link> Content tabs </a> </li> <li class=md-nav__item> <a href=../../reference/data-tables/ class=md-nav__link> Data tables </a> </li> <li class=md-nav__item> <a href=../../reference/diagrams/ class=md-nav__link> Diagrams </a> </li> <li class=md-nav__item> <a href=../../reference/footnotes/ class=md-nav__link> Footnotes </a> </li> <li class=md-nav__item> <a href=../../reference/formatting/ class=md-nav__link> Formatting </a> </li> <li class=md-nav__item> <a href=../../reference/icons-emojis/ class=md-nav__link> Icons + Emojis </a> </li> <li class=md-nav__item> <a href=../../reference/images/ class=md-nav__link> Images </a> </li> <li class=md-nav__item> <a href=../../reference/lists/ class=md-nav__link> Lists </a> </li> <li class=md-nav__item> <a href=../../reference/mathjax/ class=md-nav__link> MathJax </a> </li> <li class=md-nav__item> <a href=../../reference/pdf/ class=md-nav__link> PDF Files Support </a> </li> <li class=md-nav__item> <a href=../../reference/progress/ class=md-nav__link> Progress Bar </a> </li> <li class=md-nav__item> <a href=../../reference/remarks/ class=md-nav__link> Remarks </a> </li> <li class=md-nav__item> <a href=../../reference/smartsymbols/ class=md-nav__link> Smart symbols </a> </li> <li class=md-nav__item> <a href=../../reference/stl/ class=md-nav__link> STL Files Support </a> </li> <li class=md-nav__item> <a href=../../reference/awesome/ class=md-nav__link> Customizing Navigation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> JTBD <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=JTBD data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> JTBD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../JTBD/barriers/ class=md-nav__link> Five barriers to innovation </a> </li> <li class=md-nav__item> <a href=../../JTBD/jtbd/ class=md-nav__link> What is Jobs-to-be-done </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=#detailed-design-general class=md-nav__link> Detailed Design - General </a> </li> <li class=md-nav__item> <a href=#detailed-design-consensus-mana class=md-nav__link> Detailed Design - Consensus Mana </a> </li> <li class=md-nav__item> <a href=#consensus-mana-update-procedure class=md-nav__link> Consensus Mana update procedure </a> <nav class=md-nav aria-label="Consensus Mana update procedure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pledging-the-cmana-relative-to-a-transaction-with-timestamp-smaller-than-the-last-reference-time class=md-nav__link> Pledging the cMana relative to a transaction with timestamp smaller than the last reference time </a> </li> <li class=md-nav__item> <a href=#pledging-the-cmana-relative-to-a-transaction-with-timestamp-larger-than-the-last-reference-time class=md-nav__link> Pledging the cMana relative to a transaction with timestamp larger than the last reference time </a> </li> <li class=md-nav__item> <a href=#updating-the-cmana-to-a-time-larger-than-the-last-reference-time-without-any-new-cmana-pledging class=md-nav__link> Updating the cMana to a time larger than the last reference time without any new cMana pledging </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4332-active-consensus-mana-and-epochs class=md-nav__link> 4.3.3.2 Active Consensus Mana and Epochs </a> </li> <li class=md-nav__item> <a href=#detailed-design-access-mana class=md-nav__link> Detailed Design - Access Mana </a> </li> <li class=md-nav__item> <a href=#access-mana-update-procedure class=md-nav__link> Access Mana update procedure </a> <nav class=md-nav aria-label="Access Mana update procedure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pledging-the-amana-relative-to-a-transaction-with-timestamp-smaller-than-the-last-reference-time class=md-nav__link> Pledging the aMana relative to a transaction with timestamp smaller than the last reference time </a> </li> <li class=md-nav__item> <a href=#pledging-the-amana-relative-to-a-transaction-with-timestamp-larger-than-the-last-reference-time class=md-nav__link> Pledging the aMana relative to a transaction with timestamp larger than the last reference time </a> </li> <li class=md-nav__item> <a href=#updating-the-amana-to-a-time-larger-than-the-last-reference-time-without-any-new-amana-pledging class=md-nav__link> Updating the aMana to a time larger than the last reference time without any new aMana pledging. </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#initialization class=md-nav__link> Initialization </a> </li> <li class=md-nav__item> <a href=#algorithm class=md-nav__link> Algorithm </a> <nav class=md-nav aria-label=Algorithm> <ul class=md-nav__list> <li class=md-nav__item> <a href=#parameter-values class=md-nav__link> Parameter Values </a> </li> <li class=md-nav__item> <a href=#local-variables-and-built-in-functions class=md-nav__link> Local Variables and Built-in Functions </a> </li> <li class=md-nav__item> <a href=#pseudocode-cmana-update class=md-nav__link> Pseudocode - cMana Update </a> </li> <li class=md-nav__item> <a href=#updatebasecmanatrtransaction class=md-nav__link> UpdateBasecManaTr(transaction) </a> </li> <li class=md-nav__item> <a href=#updatecmanatimeepoch class=md-nav__link> UpdatecManaTime(epoch) </a> </li> <li class=md-nav__item> <a href=#updatecmanatrepochtransaction class=md-nav__link> UpdatecManaTr(epoch,transaction) </a> </li> <li class=md-nav__item> <a href=#updatecmanaepoch class=md-nav__link> UpdatecMana(epoch) </a> </li> <li class=md-nav__item> <a href=#pseudocode-amana-update class=md-nav__link> Pseudocode - aMana Update </a> </li> <li class=md-nav__item> <a href=#updatebaseamanatimet class=md-nav__link> UpdateBaseaManaTime(t) </a> </li> <li class=md-nav__item> <a href=#updateamanatimet class=md-nav__link> UpdateaManaTime(t) </a> </li> <li class=md-nav__item> <a href=#updatebaseamanatrtransaction class=md-nav__link> UpdateBaseaManaTr(transaction) </a> </li> <li class=md-nav__item> <a href=#updateamanatrtransaction class=md-nav__link> UpdateaManaTr(transaction) </a> </li> <li class=md-nav__item> <a href=#updateamanatransaction class=md-nav__link> UpdateaMana(transaction) </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href="https://github.com/Zignar-Technologies/wiki/tree/main/docs/IOTA-NECTAR/5.3 Mana.md" title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <script src=/javascripts/mathjax.js async></script> <h1 id=53-mana>5.3 Mana<a class=headerlink href=#53-mana title="Permanent link">&para;</a></h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>This section introduces <em>access Mana</em> and <em>consensus Mana</em> and determines which modules use each of these two types of Mana.</p> <p>Any permissionless system needs a Sybil protection mechanism. In Coordicide, this is done by forcing every node to create a node identity (see also <a href=../3.3%20Peer%20Discovery/ >Section 3.3 - Peer Discovery</a>). Since the creation of an arbitrarily large number of identities is not an expensive operation, two <em>Difficult-to-obtain</em> resources are linked to each node identity; we call them <em>access Mana</em>(<strong>aMana</strong>) and <em>consensus Mana</em> (<strong>cMana</strong>). Both kinds of Mana can be described as essential resources to multiple parts of the network. They are related to the IOTA token, but are not tokens by themselves <!--(????? add a good explanation here)--> and do not interfere with the token balance in any direct way. When a transaction is processed, a certain amount of aMana and cMana—dependent on the amount of IOTAs moved by the transaction—will be pledged to nodes specified in the transaction (their node IDs must be specified as defined in <a href=../2.3%20Standard%20Payloads%20Layout/ >Section 2.3 - Standard Payloads Layout</a>). The access and consensus Mana pledged to each node ID must be stored as an extension of the ledger state. The only way a node can obtain aMana or cMana is to convince some ken holders to pledge to it. Both kinds of Mana provides adequate Sybil protection because they are difficult and costly to be acquired in arbitrarily large amounts. </p> <p>Access and consensus Mana are used as Sybil protection in different modules, which have different natures and requirements. For this reason, it is natural to use different formulas to calculate the appropriate Mana to each module. Consensus Mana should be seen as the Mana that is responsible for the security of the system, on the other hand, access Mana is used to distribute access to the network during congestion periods.</p> <p>We give a short overview on how each module uses its associated kind of Mana:</p> <ul> <li><a href=../3.4%20Neighbor%20Selection/ >Section 3.4 - Neighbor Selection</a>: Nodes only establish a connection with nodes of similar consensus Mana.</li> <li><a href=../4.6%20Congestion%20Control/ >Section 4.6 - Congestion Control</a>: The throughput (in bytes per second) of each node is dependent on the access Mana held.</li> <li><a href=../6.3%20Fast%20Probabilistic%20Consensus/ >Section 6.3 - Fast Probabilistic Consensus</a>: The selection probability for a node during a voting query is proportional to the consensus Mana held.</li> <li><a href=../6.4%20Finalization/ >Section 6.4 - Finalization</a>: Finalization occurs when (among other criteria) a message is approved by nodes holding a certain fraction of the consensus Mana in the network.</li> <li><a href=../6.5%20dRNG/ >Section 6.5 - Distributed Random Number Generator</a>: The dRNG committee members must be composed by high consensus Mana nodes.</li> </ul> <h2 id=detailed-design-general>Detailed Design - General<a class=headerlink href=#detailed-design-general title="Permanent link">&para;</a></h2> <p>Each transaction must have an <code>accessManaNodeID</code> and a <code>consensusManaNodeID</code> field to determine which node to pledge these two types of Mana. Both of these fields consist of a node ID of the node that will receive each kind of Mana. Access Mana and consensus Mana do not have to be pledged to the same node.</p> <p>Both kinds of Mana are <em>exponential moving averages</em> (EMA) of the <em>base Manas</em> (specifically, cMana is the EMA of base cMana, and aMana is the EMA of base aMana). An EMA is a type of moving average that places a greater weight and significance on the most recent data points. More precisely, the weighting for older data decreases exponentially in time, however, never reaching zero. <!--For more information on this subject, see ?????LINK. --> </p> <p>Even though the definition of an EMA should be unique (no matter to which function that you apply it), the general algorithm for the calculation of the EMAs—with the flexibility needed in our case—is not easily implementable. Thus, two different algorithms already customized for each type of Mana are provided in the present document.</p> <p>We define the following parameters:</p> <ul> <li><span class=arithmatex>\(\gamma\)</span>- decay factor for base aMana.</li> <li><span class=arithmatex>\(\alpha\)</span>- moving average factor for the cMana. </li> <li><span class=arithmatex>\(\beta\)</span>- moving average factor for the aMana. </li> </ul> <p>Additionally, we define four vectors that assign a real value to each node Id: the <em>aMana vector</em>, <em>base aMana vector</em>, <em>cMana vector</em> and base <em>cMana vector</em>. The base aMana vector and the base cMana vector are auxiliary vectors (meaning that they are needed to compute the aMana vector and the cMana vector, even though their values are not directly used in any of the modules). Due to the time dependance of the EMA (and also the base aMana function), the four vectors have a <em>reference time</em> to which they are associated.</p> <p>The Mana vectors are updated in different occasions. Access Mana pledging happens when a transaction is booked on the ledger state. At the same time, entries of the nodes whose aMana is not being modified during the pledging are updated only with respect to the (possibly) newer time reference. In general, updates only due to time (without aMana pledging) happen whenever a node's aMana is being accessed by an external module (as the congestion control, for instance). </p> <p>On the other hand, cMana is updated only relatively to the end of each epoch (see <a href=../4.2%20Timestamps/ >Section 4.2 - Timestamps</a>). The reason behind this is that epochs are objective, i.e. all nodes agree on which epoch a certain message (or transaction) belongs to. Thus, since nodes agree (with high probability) about transactions with timestamps older than the end of the epoch plus <code>TIMESTAMP_CUTOFF</code> (see <a href=../4.2%20Timestamps/ >Section 4.2 - Timestamps</a>), they will consequently agree—again, with high probability–about the cMana vector relative to these transactions. </p> <p>Therefore, one can assume that the nodes in sync will (with high probability) agree on values of cMana relative to the set of transactions that have timestamp older than a fixed epoch in the past. On the other hand, aMana will capture recent fluctuations, but nodes are expected to have slightly different perceptions of this quantity.</p> <h2 id=detailed-design-consensus-mana>Detailed Design - Consensus Mana<a class=headerlink href=#detailed-design-consensus-mana title="Permanent link">&para;</a></h2> <p>The base cMana of a node <code>nodeID</code> at time <code>time</code> is defined as the sum over all unspent outputs at time <code>time</code> of transactions with <code>consensusManaNodeID = nodeID</code>. This means that, when an output is consumed, its cMana pledge is revoked and pledged to a (possibly) different node. See the example below: </p> <p><strong>Example 1:</strong></p> <p>Suppose transaction <span class=arithmatex>\(z\)</span> was booked and we want to update the base cMana vector accordingly. Additionally, suppose transaction <span class=arithmatex>\(z\)</span>, <span class=arithmatex>\(x\)</span> and <span class=arithmatex>\(y\)</span> pledges cMana to nodes <span class=arithmatex>\(N_z\)</span>, <span class=arithmatex>\(N_x\)</span> and <span class=arithmatex>\(N_y\)</span>, respectively.</p> <p style="text-align: center;"> <img src=https://github.com/iotaledger/Coordicide-Specifications/blob/section/mana/images/cmana.png> </p> <p>The update of the base cMana proceeds as follows: </p> <ol> <li>Add 300 to the base cMana state of the node <span class=arithmatex>\(N_z\)</span>.</li> <li>Subtract 100 from the base cMana state of the node <span class=arithmatex>\(N_x\)</span>.</li> <li>Subtract 200 from the base cMana state of the node <span class=arithmatex>\(N_y\)</span>.</li> </ol> <p>If a transaction <span class=arithmatex>\(T_i\)</span> with timestamp <span class=arithmatex>\(t_i\)</span> pledges <span class=arithmatex>\(M_i\)</span> cMana to a node <span class=arithmatex>\(Z\)</span>, then the cMana evolution over time relative to this transaction will be given by:</p> <div class=arithmatex>\[ \text{cMana}_Z^{T_i}(t) = \begin{cases} 0, \text{ if } t&lt; t_i \\ M_i\left(1-e^{-\alpha (t-t_i)}\right), \text{ if } t\geq t_i \\ \end{cases} \]</div> <p>The total cMana of a node <span class=arithmatex>\(Z\)</span> will be, then, given by the sum of <span class=arithmatex>\(\text{cMana}_Z^{T_i}(t)\)</span> among all the transactions <span class=arithmatex>\(T_i\)</span> that pledge cMana to node <span class=arithmatex>\(Z\)</span>. Nevertheless, computing the mana using this equation may be excessively demanding in the case where a node has multiples pledges at different times. For that reason, the cMana shall be computed recursively, updating it based on its last value. This update is customized for three different situations (here, <span class=arithmatex>\(t_0\)</span> is the reference time of the previous cMana value):</p> <ol> <li>pledging of the cMana relative to a transaction with timestamp smaller than <span class=arithmatex>\(t_0\)</span>. </li> <li>pledging of the cMana relative to a transaction with timestamp larger than <span class=arithmatex>\(t_0\)</span>. </li> <li>updating the cMana to a time <span class=arithmatex>\(t_1&gt;t_0\)</span> without any new cMana pledging.</li> </ol> <p>In the first case, the reference time of the cMana must not be changed, whereas in the second case, the reference time of the cMana must be changed to the timestamp of the transaction. This means that a node must never update the cMana to a point in the past (relatively to the last cMana calculated). The exact update procedure for each of the cases defined above are defined next.</p> <h2 id=consensus-mana-update-procedure>Consensus Mana update procedure<a class=headerlink href=#consensus-mana-update-procedure title="Permanent link">&para;</a></h2> <h3 id=pledging-the-cmana-relative-to-a-transaction-with-timestamp-smaller-than-the-last-reference-time>Pledging the cMana relative to a transaction with timestamp smaller than the last reference time<a class=headerlink href=#pledging-the-cmana-relative-to-a-transaction-with-timestamp-smaller-than-the-last-reference-time title="Permanent link">&para;</a></h3> <p>Suppose that the last reference time is <span class=arithmatex>\(t\)</span> and the transaction timestamp is <span class=arithmatex>\(t-s\)</span>. The update must be done in two steps, always in the order specified below:</p> <ul> <li> <p><em>a</em>) <strong>Base cMana update</strong>. Just before updating the base cMana vector we must store it, since the last base cMana state (that we call <span class=arithmatex>\(\text{Old\_Base\_cMana}\)</span>) and the time relative to the last update are used later for the cMana calculations. This temporary vector can be deleted right after the cMana vector is updated.</p> <p>The update of the base cMana state goes as follows: if a new transaction with <span class=arithmatex>\(n\)</span> inputs of values <span class=arithmatex>\(x_1, x_2, \ldots, x_n\)</span> pledges cMana to a node <span class=arithmatex>\(N\)</span>, then 1. we add <span class=arithmatex>\(\sum_{j=1}^{n}x_j\)</span> to the base cMana of the node <span class=arithmatex>\(N\)</span>. 2. Each input <span class=arithmatex>\(I_j\)</span> corresponds to some UTXO (and, consequently, to some transaction) stored in the ledger state. Then, we locate the node Id (let us say, <span class=arithmatex>\(\text{Node}_j\)</span>) to whom the cMana relative to this output was pledged to in the past. Then, we subtract <span class=arithmatex>\(x_j\)</span> from the base cMana state of the node <span class=arithmatex>\(\text{Node}_j\)</span>, for each <span class=arithmatex>\(I_j\)</span>, <span class=arithmatex>\(j=1,\dots,n\)</span>.</p> </li> <li> <p><em>b</em>) <strong>Pledging and revoking cMana</strong>. If the base cMana balance of node <span class=arithmatex>\(i\)</span> (before we added this transaction) was <span class=arithmatex>\(\text{Old\_Base\_cMana}(\text{Node}_i)\)</span> and the new base cMana balance (after the addition of this transaction) is <span class=arithmatex>\(\text{Base\_cMana}(\text{Node}_i)\)</span>, then we update the cMana vector adding to all nodes' entry the term:</p> <div class=arithmatex>\[ (1-e^{-\alpha s})[\text{Base\_cMana}(\text{Node}_i)-\text{Old\_Base\_cMana}(\text{Node}_i)] \]</div> <p>The term above can be negative—since some nodes have their base cMana revoked—but the resulting cMana must not be. Notice that for most nodes (specifically, for all nodes that did not have their base cMana value changed) the value above is zero.</p> </li> </ul> <h3 id=pledging-the-cmana-relative-to-a-transaction-with-timestamp-larger-than-the-last-reference-time>Pledging the cMana relative to a transaction with timestamp larger than the last reference time<a class=headerlink href=#pledging-the-cmana-relative-to-a-transaction-with-timestamp-larger-than-the-last-reference-time title="Permanent link">&para;</a></h3> <p>Suppose that the last reference time is <span class=arithmatex>\(t-s\)</span> and the transaction timestamp is <span class=arithmatex>\(t\)</span>. The update must be done in two steps, always in the order specified below:</p> <ul> <li> <p><em>a</em>) <strong>Base cMana update</strong>. Just before updating the base cMana vector we must store it, since the last base cMana state (that we call <span class=arithmatex>\(\text{Old\_Base\_cMana}\)</span>) and the time relative to the last update are used later for the cMana calculations. This temporary vector can be deleted right after the cMana vector is updated.</p> <p>The update of the base cMana state goes as follows: if a new transaction with <span class=arithmatex>\(n\)</span> inputs of respective values <span class=arithmatex>\(x_1, x_2, \ldots, x_n\)</span> pledges cMana to a node <span class=arithmatex>\(N\)</span>, then 1. we add <span class=arithmatex>\(\sum_{j=1}^{n}x_j\)</span> to the base cMana of the node <span class=arithmatex>\(N\)</span>. 2. Each input <span class=arithmatex>\(I_j\)</span> corresponds to some UTXO (and, consequently, to some transaction) stored in the ledger state. Then, we locate the node Id (let us say, <span class=arithmatex>\(\text{Node}_j\)</span>) to whom the cMana relative to this output was pledged to in the past. Then, we subtract <span class=arithmatex>\(x_j\)</span> from the base cMana state of the node <span class=arithmatex>\(\text{Node}_j\)</span>, for each <span class=arithmatex>\(I_j\)</span>, <span class=arithmatex>\(j=1,\dots,n\)</span>.</p> </li> <li> <p><em>b</em>) <strong>Updating the cMana with respect to time</strong>. Suppose that the outdated cMana is <span class=arithmatex>\(\text{Old\_cMana}\)</span>. We update all cMana entries as follows:</p> </li> </ul> <p>$$ \text{cMana}(\text{Node}_i)=e^{-\alpha s} \text{Old_cMana}(\text{Node}_i)+(1-e^{-\alpha s})\text{Old_Base_cMana}(\text{Node}_i) $$ where <span class=arithmatex>\(\alpha\)</span> is the moving average parameter for the cMana. </p> <h3 id=updating-the-cmana-to-a-time-larger-than-the-last-reference-time-without-any-new-cmana-pledging>Updating the cMana to a time larger than the last reference time without any new cMana pledging<a class=headerlink href=#updating-the-cmana-to-a-time-larger-than-the-last-reference-time-without-any-new-cmana-pledging title="Permanent link">&para;</a></h3> <p>Suppose that the last reference time is <span class=arithmatex>\(t-s\)</span>, the new one is <span class=arithmatex>\(t\)</span> and the last cMana vector is <span class=arithmatex>\(\text{Old\_cMana}\)</span>. We update all cMana entries as follows: Suppose that the last reference time is <span class=arithmatex>\(t-s\)</span>, the new one is <span class=arithmatex>\(t\)</span> and the last cMana vector is <span class=arithmatex>\(\text{Old\_cMana}\)</span>. We update all cMana entries as follows:</p> <p>$$ \text{cMana}(\text{Node}_i)=e^{-\alpha s} \text{Old_cMana}(\text{Node}_i)+(1-e^{-\alpha s})\text{Old_Base_cMana}(\text{Node}_i) $$ where <span class=arithmatex>\(\alpha\)</span> is the moving average parameter for the cMana. </p> <h2 id=4332-active-consensus-mana-and-epochs>4.3.3.2 Active Consensus Mana and Epochs<a class=headerlink href=#4332-active-consensus-mana-and-epochs title="Permanent link">&para;</a></h2> <p>The consensus Mana of a node is only calculated and stored relatively to the end of each epoch (see <a href=../4.2%20Timestamps/ >Section 4.2 - Timestamps</a>). Only the values of the last <code>MAX_STORED_EPOCHS</code> epochs are stored. Thus, if <span class=arithmatex>\(t_E\)</span> is the time of the end of epoch <span class=arithmatex>\(E\)</span>, to update the cMana vector from epoch <span class=arithmatex>\(E-1\)</span> to <span class=arithmatex>\(E\)</span>, a node must perform the following algorithm:</p> <ol> <li> <p>Update the cMana with respect to time, as described in section 4.3.3.1.3, from time <span class=arithmatex>\(t_{E-1}\)</span> to <span class=arithmatex>\(t_{E}\)</span></p> </li> <li> <p>For each transaction with timestamp in the interval <span class=arithmatex>\([t_{E-1},t_{E})\)</span>, perform (as described in section 4.3.3.1.1) the base cMana update and the pledge and revoking of cMana, while the reference time <span class=arithmatex>\(t_{E}\)</span> remains constant.</p> </li> </ol> <p>Additionally, we define the <em>active consensus Mana</em> of a node A in epoch E (i.e., relatively to time <span class=arithmatex>\(t_{E}\)</span>) as (here, <span class=arithmatex>\(\text{cMana}\)</span> is also relative to time <span class=arithmatex>\(t_{E}\)</span>):</p> <div class=arithmatex>\[ \text{Active\_cMana}(\text{Node A})=\begin{cases} \text{cMana}(\text{Node A}), \text{ if there is at least one message from node `node` with timestamp in }[t_{E-1},t_{E}) \\ 0, \text{ otherwise} \end{cases} \]</div> <p>Therefore, even if node <code>node</code> has consensus Mana greater than zero at a certain epoch <span class=arithmatex>\(E\)</span>, it can be considered dormant in case it did not issue any message during the same epoch. All nodes that have active consensus Mana in epoch <span class=arithmatex>\(E\)</span> will form what we call the active consensus Mana set of that epoch, or <code>ACMS(E)</code>.</p> <p>Both calculations defined above (cMana and active cMana on an epoch <span class=arithmatex>\(E\)</span>) can only be carried out when epoch <span class=arithmatex>\(E\)</span> is finalized—that is, at least <code>TIMESTAMP_CUTOFF</code> (see <a href=../4.2%20Timestamps/ >Section 4.2 - Timestamps</a>) units of time after <span class=arithmatex>\(t_E\)</span>—to make sure that no more messages belonging to the epoch will appear in the network.</p> <p>The following data structures and functions must be defined:</p> <ul> <li> <p><code>UpdatecMana(epoch)</code>: updates the base cMana and cMana vectors from the end of <code>epoch-1</code> to <code>epoch</code>, pledging and revoking the base cMana and cMana relative to all the relevant transactions. </p> </li> <li> <p><code>GetActiveConsensusMana(time)</code>: returns a mapping between all known nodes and their active cMana, calculated at the end of the epoch that contains <code>time</code>.</p> </li> <li> <p><code>ManaRank(lowerMana, upperMana, epoch)</code>: returns the node ID of the nodes with active cMana in the interval <code>[lowerMana, upperMana]</code>, relative to <code>epoch</code>. Notice that <code>epoch</code> must be, at least, the current epoch minus <code>MAX_STORED_EPOCHS</code> and, at most, the last epoch.</p> </li> </ul> <h2 id=detailed-design-access-mana>Detailed Design - Access Mana<a class=headerlink href=#detailed-design-access-mana title="Permanent link">&para;</a></h2> <p>When an output is consumed and funds are consequently transferred, a certain amount of base aMana—dependent on the amount of funds and the age of the output—will be pledged to a node. This pledge is never revoked, as opposed to base cMana. Nevertheless, the base aMana of all nodes will <em>decay</em> over time, which means that all the calculations for aMana will be slightly different than for cMana. The base aMana at time <span class=arithmatex>\(t\)</span>, relative to an output <span class=arithmatex>\(T_i\)</span> (of amount <span class=arithmatex>\(M_i\)</span>) consumed by a transaction with timestamp <span class=arithmatex>\(t-s\)</span> and generated by a transaction with timestamp <span class=arithmatex>\(t-s-\delta\)</span> is, for <span class=arithmatex>\(s,\delta&gt;0\)</span></p> <div class=arithmatex>\[ \text{Base\_aMana}^{T_i}(t)= M (1-e^{-\gamma \delta}) e^{-\gamma s}, \text{ if } t\geq t-s \]</div> <p>If this same output pledges aMana to a node <span class=arithmatex>\(Z\)</span>, then the aMana evolution over time (again, for <span class=arithmatex>\(s,\delta&gt;0\)</span>) relative to it will be given by:</p> <div class=arithmatex>\[ \text{aMana}_Z^{T_i}(t) = \begin{cases} M_i(1-e^{-\gamma\delta})\dfrac{\beta e^{-\beta s}}{\beta-\gamma}\left(e^{(\beta-\gamma)s}-1\right), \text{ if }\beta\neq \gamma\\ M_i(1-e^{-\gamma\delta})\gamma s e^{-\gamma s}, \text{ if } \beta= \gamma\\ \end{cases} \]</div> <p>The base aMana of a node <code>nodeID</code> at time <code>time</code> is defined as the sum of the individual base aMana generated by all already consumed outputs <span class=arithmatex>\(T_i\)</span> of transactions with <code>accessManaNodeID = nodeID</code> and timestamp smaller or equal than <code>time</code>. Nevertheless, as in the cMana case, computing the aMana using this equation can be excessively demanding. For that reason, the aMana shall computed recursively, updating it based on its last value. This update is customized for three different situations (here, <span class=arithmatex>\(t_0\)</span> is the reference time of the last aMana value):</p> <ol> <li>pledging of the aMana relative to a transaction with timestamp smaller than <span class=arithmatex>\(t_0\)</span>;</li> <li>pledging of the aMana relative to a transaction with timestamp larger than <span class=arithmatex>\(t_0\)</span>;</li> <li>updating the aMana to a time <span class=arithmatex>\(t_1&gt;t_0\)</span> without any new aMana pledging.</li> </ol> <p>In the first case, the reference time of the aMana must not be changed, whereas in the second case, the reference time of the cMana must be changed to the timestamp of the transaction. This means that a node must never update the aMana to a point in the past (relatively to the last aMana calculated). The exact update procedure for each of the cases defined above are defined next.</p> <h2 id=access-mana-update-procedure>Access Mana update procedure<a class=headerlink href=#access-mana-update-procedure title="Permanent link">&para;</a></h2> <h3 id=pledging-the-amana-relative-to-a-transaction-with-timestamp-smaller-than-the-last-reference-time>Pledging the aMana relative to a transaction with timestamp smaller than the last reference time<a class=headerlink href=#pledging-the-amana-relative-to-a-transaction-with-timestamp-smaller-than-the-last-reference-time title="Permanent link">&para;</a></h3> <p>Suppose that the last reference time is <span class=arithmatex>\(t\)</span> and the transaction timestamp is <span class=arithmatex>\(t-s\)</span>. The update must be done in two steps, always in the order specified below:</p> <ul> <li> <p><strong>Base aMana pledging</strong>. Suppose that the new transaction consists of <span class=arithmatex>\(m\)</span> inputs <span class=arithmatex>\(I_1, I_2, \ldots, I_m\)</span> of value <span class=arithmatex>\(x_1, x_2, \ldots, x_m\)</span>—respectively—and pledges aMana to a node <span class=arithmatex>\(N\)</span>. We update the base aMana of node <span class=arithmatex>\(N\)</span> by adding to its base aMana the value</p> <p>$$ d=e^{-\gamma s} \sum_{j=1}<sup -_gamma=-\gamma _delta__j=\delta_{j>{m}x_j(1-e</sup>}) $$ where <span class=arithmatex>\(\delta_{j}&gt;0\)</span> is the difference between <span class=arithmatex>\(t\)</span> and the timestamps of the transaction that generated <span class=arithmatex>\(I_j\)</span> and <span class=arithmatex>\(\gamma\)</span> is the decay factor. This value <span class=arithmatex>\(d\)</span> has to be temporarily stored, since it will be used in the aMana update.</p> </li> <li> <p><strong>Pledging aMana</strong>. We update the aMana vector adding to node <span class=arithmatex>\(N\)</span>'s entry the term:</p> <p>$$ \begin{cases}<br> \frac{e^{-\gamma s}-e^{-\beta s}}{(\beta-\gamma)e^{-\gamma s}}\beta d,\text{ if }\beta\neq\gamma;\ s \beta d,\text{ if }\beta=\gamma,\ \end{cases} $$ where the term <span class=arithmatex>\(d\)</span> is the same it was added when updating the base aMana vector. </p> </li> </ul> <h3 id=pledging-the-amana-relative-to-a-transaction-with-timestamp-larger-than-the-last-reference-time>Pledging the aMana relative to a transaction with timestamp larger than the last reference time<a class=headerlink href=#pledging-the-amana-relative-to-a-transaction-with-timestamp-larger-than-the-last-reference-time title="Permanent link">&para;</a></h3> <p>Suppose that the last reference time is <span class=arithmatex>\(t-s\)</span> and the transaction timestamp is <span class=arithmatex>\(t\)</span>. The update must be done in three steps, always in the order specified below:</p> <ul> <li> <p><strong>Base aMana update with respect to time</strong>. Suppose that the last base aMana is <span class=arithmatex>\(\text{Old\_Base\_aMana}\)</span>. We update all base aMana entries as follows:</p> <div class=arithmatex>\[ \text{Base\_aMana}(\text{Node}_i) = e^{-\gamma s}\text{Old\_Base\_aMana}(\text{Node}_i) \]</div> </li> <li> <p><strong>Base aMana pledging</strong>. Suppose that the new transaction consists of <span class=arithmatex>\(m\)</span> inputs <span class=arithmatex>\(I_1, I_2, \ldots, I_m\)</span> of value <span class=arithmatex>\(x_1, x_2, \ldots, x_m\)</span>, respectively, and pledges aMana to a node <span class=arithmatex>\(N\)</span>. We update the base aMana of node <span class=arithmatex>\(N\)</span> by adding to its base aMana the value</p> <p>$$ d=\sum_{j=1}<sup -_gamma=-\gamma _delta__j=\delta_{j>{m}x_j(1-e</sup>}) $$ where <span class=arithmatex>\(\delta_{j}&gt;0\)</span> is the difference between <span class=arithmatex>\(t\)</span> and the timestamps of the transaction that generated <span class=arithmatex>\(I_j\)</span> and <span class=arithmatex>\(\gamma\)</span> is the decay factor. This value <span class=arithmatex>\(d\)</span> has to be temporarily stored, since it will be used in the aMana update.</p> </li> <li> <p><strong>Updating the aMana with respect to time</strong>. We update all aMana entries as follows:</p> <div class=arithmatex>\[ \text{ aMana}(\text{Node}_i)=\begin{cases} e^{-\beta s} \text{Old\_aMana}(\text{Node}_i)+\frac{e^{-\gamma s}-e^{-\beta s}}{(\beta-\gamma)e^{-\gamma s}} \beta\text{Base\_aMana}(\text{Node}_i),\text{ if }\beta\neq\gamma;\\ e^{-\beta s} \text{Old\_aMana}(\text{Node}_i)+s\beta\text{Base\_aMana}(\text{Node}_i),\text{ if }\beta=\gamma,\\ \end{cases} \]</div> <p>where <span class=arithmatex>\(\beta\)</span> is the moving average parameter for the aMana and <span class=arithmatex>\(\gamma\)</span> is the base aMana decay factor. Notice that, here, the value of <span class=arithmatex>\(\text{Base\_aMana(Node}_i)\)</span> used is the one already updated. </p> </li> </ul> <h3 id=updating-the-amana-to-a-time-larger-than-the-last-reference-time-without-any-new-amana-pledging>Updating the aMana to a time larger than the last reference time without any new aMana pledging.<a class=headerlink href=#updating-the-amana-to-a-time-larger-than-the-last-reference-time-without-any-new-amana-pledging title="Permanent link">&para;</a></h3> <p>Suppose that the last reference time is <span class=arithmatex>\(t-s\)</span> and new one is <span class=arithmatex>\(t\)</span>. The update must be done in two steps, always in the order specified below:</p> <ul> <li> <p><strong>Base aMana update with respect to time</strong>. Suppose that the outdated base aMana is <span class=arithmatex>\(\text{Old\_Base\_aMana}\)</span>. We update the base aMana entries as follows:</p> <div class=arithmatex>\[ \text{Base\_aMana}(\text{Node}_i) = e^{-\gamma s}\text{Old\_Base\_aMana}(\text{Node}_i) \]</div> </li> <li> <p><strong>Updating the aMana with respect to time</strong>. We update all the aMana entries as follows:</p> <div class=arithmatex>\[ \text{aMana}(\text{Node}_i)=\begin{cases} e^{-\beta s} \text{Old\_aMana}(\text{Node}_i)+\frac{e^{-\gamma s}-e^{-\beta s}}{(\beta-\gamma)e^{-\gamma s}} \beta\text{Base\_aMana}(\text{Node}_i),\text{ if }\beta\neq\gamma;\\ e^{-\beta s} \text{Old\_aMana}(\text{Node}_i)+s\beta\text{Base\_aMana}(\text{Node}_i),\text{ if }\beta=\gamma,\\ \end{cases} \]</div> <p>where <span class=arithmatex>\(\beta\)</span> is the moving average parameter for the aMana and <span class=arithmatex>\(\gamma\)</span> is the base aMana decay factor. Notice that, here, the value of <span class=arithmatex>\(\text{Base\_aMana(Node}_i)\)</span> used is the one already updated. </p> </li> </ul> <p>The following data structures and functions must be defined:</p> <ul> <li> <p><code>GetAccessMana()</code>: returns a mapping between all known nodes and their access Mana, calculated at <code>currentTime</code> (which means that the aMana is updated to <code>currentTime</code> when this function is called).</p> </li> <li> <p><code>UpdateaMana(transaction)</code>: whenever a transaction <code>transaction</code> is added to the ledger state, it updates the aMana vector in order to add the aMana relative to <code>transaction</code> and to the (possibly) new reference time.</p> </li> </ul> <h2 id=initialization>Initialization<a class=headerlink href=#initialization title="Permanent link">&para;</a></h2> <p>The Mana is an extension of the ledger state, hence its calculation depends on the ledger state perception of the node. Snapshotting is the mechanism that stores older ledger states and prunes unnecessary messages. Together with the ledger state, aMana and cMana vectors (and the reference time relative to them) are also saved, since a certain ledger state reflects a certain aMana and cMana distribution in the network. Thus, when a node joins the network, it will query other nodes to get their snapshot file, containing a <code>aMana Snapshot Vector</code>, a <code>cMana Snapshot Vector</code>, and two <code>ACMS</code> (one for each of the last two snapshotted epochs) that will be used as initialization data. </p> <h2 id=algorithm>Algorithm<a class=headerlink href=#algorithm title="Permanent link">&para;</a></h2> <h3 id=parameter-values>Parameter Values<a class=headerlink href=#parameter-values title="Permanent link">&para;</a></h3> <p>The following parameters will be used by default, and all nodes must know them. We do not have explicit rules to punish nodes that clearly do not use these parameters, but we expect that they would be eventually ignored, due to other implicit mechanisms. For instance, even if the Mana vectors of a certain node are significantly different from the other nodes' view (causing a divergence from the majority's opinion in the voting protocol), with a very high probability its opinion will not affect the final outcome of the voting. For other modules (like congestion control), a node with a significantly different perception of Mana will be blacklisted and will not harm the network. Thus, the nodes have plenty of incentives to follow the rules.</p> <p><strong>Table 4.3.1 List of Parameters</strong></p> <table> <thead> <tr> <th>Name</th> <th align=center>Type</th> <th>Description</th> <th>Observation</th> </tr> </thead> <tbody> <tr> <td><code>DECAY</code></td> <td align=center>float</td> <td>decay factor for base aMana</td> <td>Called <span class=arithmatex>\(\gamma\)</span> in the last sections. For a half life of ~6 hours we need <span class=arithmatex>\(\gamma=0.00192541 \frac{1}{\text{min}}\)</span>.</td> </tr> <tr> <td><code>C_MANA_EMA_COEFF</code></td> <td align=center>float</td> <td>moving average factor for the cMana</td> <td>Called <span class=arithmatex>\(\alpha\)</span> in the last sections. Set as the same value as <span class=arithmatex>\(\gamma\)</span>.</td> </tr> <tr> <td><code>A_MANA_EMA_COEFF</code></td> <td align=center>float</td> <td>moving average factor for the aMana</td> <td>Called <span class=arithmatex>\(\beta\)</span> in the last sections. Set as the same value as <span class=arithmatex>\(\gamma\)</span>.</td> </tr> </tbody> </table> <h3 id=local-variables-and-built-in-functions>Local Variables and Built-in Functions<a class=headerlink href=#local-variables-and-built-in-functions title="Permanent link">&para;</a></h3> <p><strong>Table 4.3.2 Local Variables and Built-in Functions</strong></p> <table> <thead> <tr> <th>Name</th> <th align=center>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>object.cManaNode</code></td> <td align=center>nodeID</td> <td>Id of the node to which <code>object</code>'s cMana was pledged</td> </tr> <tr> <td><code>object.amount</code></td> <td align=center>double</td> <td>Amount moved by <code>object</code></td> </tr> <tr> <td><code>object.aManaNode</code></td> <td align=center>nodeID</td> <td>Id of the node to which <code>object</code>'s aMana was pledged</td> </tr> <tr> <td><code>transaction.inputs</code></td> <td align=center>list of inputs IDs</td> <td>List of inputs consumed by <code>transaction</code></td> </tr> <tr> <td><code>transaction.time</code></td> <td align=center>time</td> <td>Timestamp of <code>transaction</code></td> </tr> <tr> <td><code>nodes</code></td> <td align=center>list of nodeIDs</td> <td>List of known nodes.</td> </tr> <tr> <td><code>epoch.finalTime</code></td> <td align=center>time</td> <td>Final time of <code>epoch</code></td> </tr> <tr> <td><code>epoch.initialTime</code></td> <td align=center>time</td> <td>Initial time of <code>epoch</code></td> </tr> <tr> <td><code>epoch.transactions</code></td> <td align=center>list of TxIds</td> <td>Set of transactions with timestamps in the interval <code>[epoch.initialTime,epoch.finalTime)</code></td> </tr> <tr> <td><code>input.time</code></td> <td align=center>time</td> <td>Timestamp of the transaction that generated the output relative to <code>input</code></td> </tr> </tbody> </table> <h3 id=pseudocode-cmana-update>Pseudocode - cMana Update<a class=headerlink href=#pseudocode-cmana-update title="Permanent link">&para;</a></h3> <p>In this section, for the sake of clarity, we introduce an example of code of the functions defined above. </p> <h3 id=updatebasecmanatrtransaction><code>UpdateBasecManaTr(transaction)</code><a class=headerlink href=#updatebasecmanatrtransaction title="Permanent link">&para;</a></h3> <p>The function <code>UpdateBasecManaTr(transaction)</code> updates the vector <code>basecMana</code>, pledging and revoking the base cMana relative to a transaction <code>transaction</code>. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdateBasecManaTr</span><span class=p>(</span><span class=n>transaction</span><span class=p>)</span>
    <span class=n>basecMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>cManaNode</span><span class=o>]</span> <span class=o>=</span> <span class=n>basecMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>cManaNode</span><span class=o>]+</span><span class=n>transaction</span><span class=p>.</span><span class=n>amount</span> 
    <span class=k>FOR</span> <span class=n>input</span> <span class=ow>in</span> <span class=n>transaction</span><span class=p>.</span><span class=n>inputs</span>
        <span class=n>basecMana</span><span class=o>[</span><span class=n>input</span><span class=p>.</span><span class=n>cManaNode</span><span class=o>]</span> <span class=o>=</span> <span class=n>basecMana</span><span class=o>[</span><span class=n>input</span><span class=p>.</span><span class=n>cManaNode</span><span class=o>]-</span><span class=n>input</span><span class=p>.</span><span class=n>amount</span>
</code></pre></div> <h3 id=updatecmanatimeepoch><code>UpdatecManaTime(epoch)</code><a class=headerlink href=#updatecmanatimeepoch title="Permanent link">&para;</a></h3> <p>The function <code>UpdatecManaTime(epoch)</code> updates the vector <code>cMana</code>, changing its reference time from the end of <code>epoch-1</code> to the end of <code>epoch</code>. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdatecManaTime</span><span class=p>(</span><span class=n>epoch</span><span class=p>)</span>
    <span class=n>n</span> <span class=o>=</span> <span class=n>epoch</span><span class=p>.</span><span class=n>finalTime</span><span class=o>-</span><span class=n>epoch</span><span class=p>.</span><span class=n>initialTime</span>
    <span class=k>FOR</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span>
        <span class=n>cMana</span><span class=o>[</span><span class=n>node</span><span class=o>]</span> <span class=o>=</span> <span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>C_MANA_EMA_COEFF</span><span class=o>*</span><span class=n>n</span><span class=p>)</span><span class=o>*</span><span class=n>cMana</span><span class=o>[</span><span class=n>node</span><span class=o>]</span>
                        <span class=o>+</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>C_MANA_EMA_COEFF</span><span class=o>*</span><span class=n>n</span><span class=p>))</span><span class=o>*</span><span class=n>basecMana</span><span class=o>[</span><span class=n>node</span><span class=o>]</span>
</code></pre></div> <h3 id=updatecmanatrepochtransaction><code>UpdatecManaTr(epoch,transaction)</code><a class=headerlink href=#updatecmanatrepochtransaction title="Permanent link">&para;</a></h3> <p>The function <code>UpdatecManaTr(epoch,transaction)</code> updates the vector <code>cMana</code>, pledging and revoking the cMana relative to a transaction <code>transaction</code>. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdatecManaTr</span><span class=p>(</span><span class=n>epoch</span><span class=p>,</span><span class=n>transaction</span><span class=p>)</span>
    <span class=n>n</span> <span class=o>=</span> <span class=n>epoch</span><span class=p>.</span><span class=n>finalTime</span> <span class=o>-</span> <span class=n>transaction</span><span class=p>.</span><span class=n>time</span>
    <span class=k>FOR</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>nodes</span>
        <span class=k>IF</span> <span class=n>basecMana</span><span class=o>[</span><span class=n>node</span><span class=o>]</span> <span class=p>!</span><span class=o>=</span> <span class=n>basecManaOld</span><span class=o>[</span><span class=n>node</span><span class=o>]</span>
            <span class=n>cMana</span><span class=o>[</span><span class=n>node</span><span class=o>]</span> <span class=o>=</span> <span class=n>cMana</span><span class=o>[</span><span class=n>node</span><span class=o>]+</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>C_MANA_EMA_COEFF</span><span class=p>)</span><span class=o>**</span><span class=n>n</span><span class=p>)</span><span class=o>*</span><span class=p>(</span><span class=n>basecMana</span><span class=o>[</span><span class=n>node</span><span class=o>]-</span><span class=n>basecManaOld</span><span class=o>[</span><span class=n>node</span><span class=o>]</span><span class=p>)</span>
</code></pre></div> <h3 id=updatecmanaepoch><code>UpdatecMana(epoch)</code><a class=headerlink href=#updatecmanaepoch title="Permanent link">&para;</a></h3> <p>The function <code>UpdatecMana(epoch)</code> updates the vectors <code>cMana</code> and <code>basecMana</code>, from the end of <code>epoch-1</code> to <code>epoch</code>, pledging and revoking the base cMana and cMana relative to all the relevant transactions. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdatecMana</span><span class=p>(</span><span class=n>epoch</span><span class=p>):</span>
    <span class=n>UpdatecManaTime</span><span class=p>(</span><span class=n>epoch</span><span class=p>)</span>
    <span class=k>IF</span> <span class=n>epoch</span><span class=p>.</span><span class=n>transactions</span> <span class=p>!</span><span class=o>=</span> <span class=n>NULL</span><span class=p>:</span>
        <span class=k>FOR</span> <span class=n>transaction</span> <span class=ow>in</span> <span class=n>epoch</span><span class=p>.</span><span class=n>transactions</span><span class=p>:</span>
            <span class=n>basecManaOld</span> <span class=o>=</span> <span class=n>basecMana</span>
            <span class=n>UpdateBasecManaTr</span><span class=p>(</span><span class=n>transaction</span><span class=p>)</span>
            <span class=n>UpdatecManaTr</span><span class=p>(</span><span class=n>epoch</span><span class=p>,</span><span class=n>transaction</span><span class=p>)</span>
</code></pre></div> <h3 id=pseudocode-amana-update>Pseudocode - aMana Update<a class=headerlink href=#pseudocode-amana-update title="Permanent link">&para;</a></h3> <p>In this section, for the sake of clarity, we introduce an example of code of the functions defined above. </p> <h3 id=updatebaseamanatimet><code>UpdateBaseaManaTime(t)</code><a class=headerlink href=#updatebaseamanatimet title="Permanent link">&para;</a></h3> <p>The function <code>UpdateBaseaManaTime(t)</code> updates the vector <code>baseaMana</code>, changing its reference time from <code>lastUpdateTime</code> to <code>t</code>. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdateBaseaManaTime</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>
    <span class=n>n</span> <span class=o>=</span> <span class=n>t</span><span class=o>-</span><span class=n>lastUpdateTime</span>
    <span class=k>FOR</span> <span class=k>each</span> <span class=n>node</span> <span class=n>i</span>
        <span class=n>baseaMana</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>baseaMana</span><span class=o>[</span><span class=n>i</span><span class=o>]*</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>DECAY</span><span class=o>*</span><span class=n>n</span><span class=p>)</span>  
</code></pre></div> <h3 id=updateamanatimet><code>UpdateaManaTime(t)</code><a class=headerlink href=#updateamanatimet title="Permanent link">&para;</a></h3> <p>The function <code>UpdateaManaTime(t)</code> updates the vector <code>aMana</code>, changing its reference time from <code>lastUpdateTime</code> to <code>t</code>. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdateaManaTime</span><span class=p>(</span><span class=n>t</span><span class=p>)</span>
    <span class=n>n</span> <span class=o>=</span> <span class=n>t</span><span class=o>-</span><span class=n>lastUpdateTime</span>
    <span class=k>IF</span> <span class=n>DECAY</span> <span class=p>!</span><span class=o>=</span> <span class=n>A_MANA_EMA_COEFF</span>
        <span class=k>FOR</span> <span class=k>each</span> <span class=n>node</span> <span class=n>i</span>
            <span class=n>aMana</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>*</span><span class=n>n</span><span class=p>)</span><span class=o>*</span><span class=n>aMana</span><span class=o>[</span><span class=n>i</span><span class=o>]+</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>exp</span><span class=p>((</span><span class=n>DECAY</span><span class=o>-</span><span class=n>A_MANA_EMA_COEFF</span><span class=p>)</span><span class=o>*</span><span class=n>n</span><span class=p>))</span><span class=o>/</span><span class=p>(</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>-</span><span class=n>DECAY</span><span class=p>))</span><span class=o>*</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>*</span><span class=n>baseaMana</span><span class=o>[</span><span class=n>i</span><span class=o>]</span>
    <span class=k>ELSE</span>       
        <span class=k>FOR</span> <span class=k>each</span> <span class=n>node</span> <span class=n>i</span>
            <span class=n>aMana</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>*</span><span class=n>n</span><span class=p>)</span><span class=o>*</span><span class=n>aMana</span><span class=o>[</span><span class=n>i</span><span class=o>]+</span> <span class=n>DECAY</span><span class=o>*</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>*</span><span class=n>baseaMana</span><span class=o>[</span><span class=n>i</span><span class=o>]</span>            
</code></pre></div> <h3 id=updatebaseamanatrtransaction><code>UpdateBaseaManaTr(transaction)</code><a class=headerlink href=#updatebaseamanatrtransaction title="Permanent link">&para;</a></h3> <p>The function <code>UpdateBaseaManaTr(t,transaction)</code> updates the vector <code>baseaMana</code>, pledging the base aMana relative to a transaction <code>transaction</code>. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdateBaseaManaTr</span><span class=p>(</span><span class=n>transaction</span><span class=p>)</span>
    <span class=k>FOR</span> <span class=n>input</span> <span class=ow>in</span> <span class=n>transaction</span><span class=p>.</span><span class=n>inputs</span>
        <span class=n>baseaMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]</span> <span class=o>=</span> <span class=n>baseaMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]+</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>DECAY</span><span class=o>*</span><span class=p>(</span><span class=n>MAX</span><span class=p>(</span><span class=n>transaction</span><span class=p>.</span><span class=n>time</span><span class=p>,</span><span class=n>lastUpdateTime</span><span class=p>)</span><span class=o>-</span><span class=n>transaction</span><span class=p>.</span><span class=n>time</span><span class=p>))</span><span class=o>*</span><span class=n>input</span><span class=p>.</span><span class=n>amount</span><span class=o>*</span><span class=p>(</span><span class=mi>1</span><span class=o>-</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>DECAY</span><span class=o>*</span><span class=p>(</span><span class=n>transaction</span><span class=p>.</span><span class=n>time</span><span class=o>-</span><span class=n>input</span><span class=p>.</span><span class=n>time</span><span class=p>)))</span> 
</code></pre></div> <h3 id=updateamanatrtransaction><code>UpdateaManaTr(transaction)</code><a class=headerlink href=#updateamanatrtransaction title="Permanent link">&para;</a></h3> <p>The function <code>UpdateaManaTr(transaction)</code> updates the vector <code>aMana</code>, pledging the aMana relative to a transaction <code>transaction</code>. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdateaManaTr</span><span class=p>(</span><span class=n>transaction</span><span class=p>):</span>
    <span class=n>n</span> <span class=o>=</span> <span class=n>lastUpdateTime</span><span class=o>-</span><span class=n>transaction</span><span class=p>.</span><span class=n>time</span>
    <span class=k>IF</span> <span class=n>DECAY</span> <span class=p>!</span><span class=o>=</span> <span class=n>A_MANA_EMA_COEFF</span>
        <span class=n>aMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]</span> <span class=o>=</span> <span class=n>aMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]+</span><span class=p>(</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>DECAY</span><span class=o>*</span><span class=n>n</span><span class=p>)</span><span class=o>-</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>*</span><span class=n>n</span><span class=p>))</span><span class=o>/</span><span class=p>(</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>-</span><span class=n>DECAY</span><span class=p>))</span><span class=o>*</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>*</span><span class=p>(</span><span class=n>baseaMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]-</span><span class=n>baseaManaOld</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]</span><span class=p>)</span>
    <span class=k>ELSE</span>
        <span class=n>aMana</span><span class=o>[</span><span class=n>aManaNode</span><span class=p>(</span><span class=n>transaction</span><span class=p>)</span><span class=o>]</span> <span class=o>=</span> <span class=n>aMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]+</span><span class=n>exp</span><span class=p>(</span><span class=o>-</span><span class=n>DECAY</span><span class=o>*</span><span class=n>n</span><span class=p>)</span><span class=o>*</span><span class=n>DECAY</span><span class=o>*</span><span class=n>A_MANA_EMA_COEFF</span><span class=o>*</span><span class=p>(</span><span class=n>baseaMana</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]-</span><span class=n>baseaManaOld</span><span class=o>[</span><span class=n>transaction</span><span class=p>.</span><span class=n>aManaNode</span><span class=o>]</span><span class=p>)</span>
</code></pre></div> <h3 id=updateamanatransaction><code>UpdateaMana(transaction)</code><a class=headerlink href=#updateamanatransaction title="Permanent link">&para;</a></h3> <p>The function <code>UpdateaMana(transaction)</code> updates the vectors <code>aMana</code> and <code>baseaMana</code>, from <code>lastUpdateTime</code> to <code>MAX(lastUpdateTime, transaction.time)</code>, pledging the base aMana and aMana relative to <code>transaction</code>. </p> <div class=highlight><pre><span></span><code><span class=k>FUNCTION</span> <span class=nf>UpdateaMana</span><span class=p>(</span><span class=n>transaction</span><span class=p>):</span>
    <span class=p>#</span> <span class=k>if</span> <span class=n>the</span> <span class=n>tx</span> <span class=ow>is</span> <span class=k>not</span> <span class=n>old</span><span class=p>,</span> <span class=n>add</span> <span class=n>it</span> <span class=ow>and</span> <span class=n>update</span> <span class=n>the</span> <span class=n>vector</span> <span class=k>to</span> <span class=n>t</span>   
    <span class=k>IF</span> <span class=n>transaction</span><span class=p>.</span><span class=n>time</span> <span class=o>&gt;</span> <span class=n>lastUpdateTime</span><span class=p>:</span>
        <span class=n>UpdateBaseaManaTime</span><span class=p>(</span><span class=n>transaction</span><span class=p>.</span><span class=n>time</span><span class=p>)</span>
        <span class=n>UpdateaManaTime</span><span class=p>(</span><span class=n>transaction</span><span class=p>.</span><span class=n>time</span><span class=p>)</span>
        <span class=n>UpdateBaseaManaTr</span><span class=p>(</span><span class=n>transaction</span><span class=p>)</span>
        <span class=n>lastUpdateTime</span>  <span class=o>=</span> <span class=n>transaction</span><span class=p>.</span><span class=n>time</span>        
    <span class=p>#</span> <span class=n>add</span> <span class=n>a</span> <span class=n>transaction</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>past</span>    
    <span class=k>IF</span> <span class=n>transaction</span><span class=p>.</span><span class=n>time</span> <span class=o>&lt;</span> <span class=n>lastUpdateTime</span><span class=p>:</span>
        <span class=n>baseaManaOld</span> <span class=o>=</span> <span class=n>baseaMana</span>
        <span class=n>UpdateBaseaManaTr</span><span class=p>(</span><span class=n>transaction</span><span class=p>)</span>
        <span class=n>UpdateaManaTr</span><span class=p>(</span><span class=n>transaction</span><span class=p>)</span>
</code></pre></div> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2021-06-12 23:17:59</span> <br>Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2021-06-12 23:17:59</span> </small> </div> </article> <script>var tabs=__get("__tabs");if(Array.isArray(tabs))for(var set of document.querySelectorAll("[data-tabs]")){var labels=set.querySelectorAll(":scope > label");e:for(var tab of tabs)for(var label of labels)if(label.innerText.trim()===tab){var input=label.previousElementSibling;input.checked=!0;break e}}</script> </div> </div> <a href=# class="md-top md-icon" title="Back to top" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../5.2%20Ledger%20State/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 5.2 Ledger State" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> 5.2 Ledger State </div> </div> </a> <a href=../6.1%20Objects%20of%20Consensus/ class="md-footer__link md-footer__link--next" aria-label="Next: 6.1 Objects of Consensus" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> 6.1 Objects of Consensus </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2021 Zignar Technologies </div> </div> <div class=md-footer-social> <a href=https://twitter.com/zignartech target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://www.linkedin.com/company/zignar-technologies/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> <a href=https://github.com/zignar-technologies target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://discord.gg/pEBc77shev target=_blank rel=noopener title=discord.gg class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M297.216 243.2c0 15.616-11.52 28.416-26.112 28.416-14.336 0-26.112-12.8-26.112-28.416s11.52-28.416 26.112-28.416c14.592 0 26.112 12.8 26.112 28.416zm-119.552-28.416c-14.592 0-26.112 12.8-26.112 28.416s11.776 28.416 26.112 28.416c14.592 0 26.112-12.8 26.112-28.416.256-15.616-11.52-28.416-26.112-28.416zM448 52.736V512c-64.494-56.994-43.868-38.128-118.784-107.776l13.568 47.36H52.48C23.552 451.584 0 428.032 0 398.848V52.736C0 23.552 23.552 0 52.48 0h343.04C424.448 0 448 23.552 448 52.736zm-72.96 242.688c0-82.432-36.864-149.248-36.864-149.248-36.864-27.648-71.936-26.88-71.936-26.88l-3.584 4.096c43.52 13.312 63.744 32.512 63.744 32.512-60.811-33.329-132.244-33.335-191.232-7.424-9.472 4.352-15.104 7.424-15.104 7.424s21.248-20.224 67.328-33.536l-2.56-3.072s-35.072-.768-71.936 26.88c0 0-36.864 66.816-36.864 149.248 0 0 21.504 37.12 78.08 38.912 0 0 9.472-11.52 17.152-21.248-32.512-9.728-44.8-30.208-44.8-30.208 3.766 2.636 9.976 6.053 10.496 6.4 43.21 24.198 104.588 32.126 159.744 8.96 8.96-3.328 18.944-8.192 29.44-15.104 0 0-12.8 20.992-46.336 30.464 7.68 9.728 16.896 20.736 16.896 20.736 56.576-1.792 78.336-38.912 78.336-38.912z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.indexes", "navigation.tracking", "navigation.top", "header.autohide", "content.tabs.link", "search.suggest", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.df8cae7d.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.82217815.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/tablesort/5.2.1/tablesort.min.js></script> <script src=../../javascripts/tables.js></script> <script src=../../javascripts/stl_viewer/stl_viewer.min.js></script> <script src=../../javascripts/extra.js></script> <script src=../../overrides/assets/javascripts/bundle.428d89bf.min.js></script> </body> </html>